<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0100)http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
    <title>  Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube | Acidx's Blog</title>
		<link rel="stylesheet" type="text/css" media="all" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/style.css">
	<link rel="pingback" href="http://acidx.net/wordpress/xmlrpc.php">
	<link rel="alternate" type="application/rss+xml" title="Acidx&#39;s Blog » Feed" href="http://acidx.net/wordpress/feed/">
<link rel="alternate" type="application/rss+xml" title="Acidx&#39;s Blog » Comments Feed" href="http://acidx.net/wordpress/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Acidx&#39;s Blog » Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube Comments Feed" href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/feed/">
<link rel="stylesheet" id="crayon-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-classic-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/classic.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/monaco.css" type="text/css" media="all">
<link rel="stylesheet" id="video-js-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/video-js.css" type="text/css" media="all">
<link rel="stylesheet" id="video-js-kg-skin-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/kg-video-js-skin.css" type="text/css" media="all">
<link rel="stylesheet" id="kgvid_video_styles-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/kgvid_styles.css" type="text/css" media="all">
<link rel="stylesheet" id="codecolorer-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/codecolorer.css" type="text/css" media="screen">
<link rel="stylesheet" id="simple-form-revisited-plugin-style-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/style(1).css" type="text/css" media="screen">
<link rel="stylesheet" id="thethe-captcha-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/style(2).css" type="text/css" media="all">
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/jquery.js"></script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/jquery-migrate.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var quicktagsL10n = {"closeAllOpenTags":"Close all open tags","closeTags":"close tags","enterURL":"Enter the URL","enterImageURL":"Enter the URL of the image","enterImageDescription":"Enter a description of the image","fullscreen":"fullscreen","toggleFullscreen":"Toggle fullscreen mode","textdirection":"text direction","toggleTextdirection":"Toggle Editor Text Direction","dfw":"Distraction-free writing mode"};
/* ]]> */
</script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/quicktags.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.6.9","is_admin":"0","ajaxurl":"http:\/\/acidx.net\/wordpress\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
var CrayonTagEditorSettings = {"home_url":"http:\/\/acidx.net\/wordpress","css":"crayon-te","css_selected":"crayon-selected","code_css":"#crayon-code","url_css":"#crayon-url","url_info_css":"#crayon-te-url-info","lang_css":"#crayon-lang","title_css":"#crayon-title","mark_css":"#crayon-mark","range_css":"#crayon-range","inline_css":"crayon-inline","inline_hide_css":"crayon-hide-inline","inline_hide_only_css":"crayon-hide-inline-only","hl_css":"#crayon-highlight","switch_html":"#content-html","switch_tmce":"#content-tmce","tinymce_button_generic":".mce-btn","tinymce_button":"a.mce_crayon_tinymce,.mce-i-crayon_tinymce","tinymce_button_unique":"mce_crayon_tinymce","tinymce_highlight":"mce-active","submit_css":"#crayon-te-ok","cancel_css":"#crayon-te-cancel","content_css":"#crayon-te-content","dialog_title_css":"#crayon-te-title","submit_wrapper_css":"#crayon-te-submit-wrapper","data_value":"data-value","attr_sep":":","css_sep":"_","fallback_lang":"default","add_text":"Add Code","edit_text":"Edit Code","quicktag_text":"crayon","submit_add":"Add","submit_edit":"Save","bar":"#crayon-te-bar","bar_content":"#crayon-te-bar-content","extensions":{"scpt":"applescript","applescript":"applescript","swf":"as","fla":"as","cs":"c#","h":"c++","hh":"c++","hpp":"c++","hxx":"c++","h++":"c++","cc":"c++","cpp":"c++","cxx":"c++","c++":"c++","pas":"delphi","java":"java","class":"java","jar":"java","mv":"miva","mvc":"miva","mvt":"miva","m":"objc","mm":"objc","pl":"perl","py":"python","pyw":"python","pyc":"python","pyo":"python","pyd":"python","rb":"ruby","rbx":"ruby","rhtml":"ruby","vbs":"vb"}};
var CrayonSyntaxSettings = {"version":"2.6.9","is_admin":"0","ajaxurl":"http:\/\/acidx.net\/wordpress\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/crayon.te.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://acidx.net/wordpress/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://acidx.net/wordpress/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.1.1">
<link rel="canonical" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog.html">
<link rel="shortlink" href="http://acidx.net/wordpress/?p=1572">
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<script type="text/javascript">document.createElement('video');document.createElement('audio');</script>
</head>
<body class="single single-post postid-1572 single-format-standard">
<div id="header_wrap">
		<div id="header">
		<h1>
						<a href="http://acidx.net/wordpress">Acidx's Blog</a>
					</h1>
		<h2>HowTos &amp; Reviews</h2>
		<div id="menus">
			<div class="menu"><ul><li class="page_item page-item-19"><a href="http://acidx.net/wordpress/contact/">Contact</a></li><li class="page_item page-item-1021"><a href="http://acidx.net/wordpress/disclaimer/">Disclaimer</a></li><li class="page_item page-item-13"><a href="http://acidx.net/wordpress/about/">About</a></li><li class="page_item page-item-635"><a href="http://acidx.net/wordpress/tools/">Tools</a></li></ul></div>
			<ul><li><a href="http://acidx.net/wordpress">Home</a></li></ul>
		</div>
		<div id="rss_search">
			<div id="rss"><a href="http://acidx.net/wordpress/feed/" rel="nofollow" title="RSS Feed">RSS Feed</a></div>
			<div id="search"><form id="searchform" method="get" action="http://acidx.net/wordpress/">
<input type="text" value="type, hit enter" onfocus="if (this.value == &#39;type, hit enter&#39;) {this.value = &#39;&#39;;}" onblur="if (this.value == &#39;&#39;) {this.value = &#39;type, hit enter&#39;;}" size="35" maxlength="50" name="s" id="s">
<input type="submit" id="searchsubmit" value="SEARCH">
</form></div>
		</div>
	</div>
</div>
<div id="wrapper">
<div id="content">
	<div id="path">
		<a rel="bookmark" href="http://acidx.net/wordpress">Home</a>
					› <a href="http://acidx.net/wordpress/category/howto/">HowTo</a> ›  Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube			</div>
		<div class="post-1572 post type-post status-publish format-standard hentry category-howto category-linux post_singular" id="post-1572">
		<h2 class="title">Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube</h2>
		<div class="post_info">
			<span class="p_author">admin</span>
			<span class="p_date">June 5, 2014</span>
			<span class="p_catetory"><a href="http://acidx.net/wordpress/category/howto/" rel="category tag">HowTo</a>, <a href="http://acidx.net/wordpress/category/howto/linux/" rel="category tag">Linux</a></span>
									<span class="p_comment p_comment_single"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comments" rel="bookmark">Leave a comment</a> (34)</span>
		</div>
		<div class="clear"></div>
		<div class="entry">
			<p>Installing a mailserver is a quite complex matter because several components are involved. Since there are many different operational scenarios, there are many different possible configurations, thus lots of different howtos around the internet. In this howto I’m going to describe the basic configuration of a mail&nbsp;server which has the following characteristics:</p>
<ul>
<li>Everything runs on Ubuntu 14.04 LTS x64</li>
<li>All software packages are taken from the repository (no compiling necessary)</li>
<li>The server is directly connected to the internet using a static IP address</li>
<li>Users don’t have system accounts on the Unix machine</li>
<li>User accounts are virtual accounts stored in an LDAP</li>
<li>Users with a valid LDAP account can …
<ul>
<li>Send and receive mail via POP3/IMAP</li>
<li>Send and receive mail via Web Interface</li>
</ul>
</li>
</ul>
<p>Spam and virus protection (amavis, clamav, spamassasin) is not covered by this howto.</p>
<p>Graphical overview of the set-up:</p>
<p><a href="http://acidx.net/wordpress/wp-content/uploads/2014/05/mail_server_postfix_dovecot_sasl_roundcube.png" target="_blank"><img class="alignleft wp-image-1621 size-large" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/mail_server_postfix_dovecot_sasl_roundcube-1024x646.png" alt="mail_server_postfix_dovecot_sasl_ldap_roundcube" width="650" height="410"></a></p>
<p>These are the necessary components:</p>
<ul style="list-style-type: square;">
<li>Postfix as MTA (Mail Transfer Agent) –&gt;&nbsp;This is the SMTP server. It accepts incoming mail (after a successful LDAP lookup of the recipient address) and passes it to Dovecot. It forwards outgoing mail&nbsp;(after the user successfully authenticated) to the next responsible SMTP server.</li>
<li>Dovecot as LDA (Local Delivery Agent) –&gt; This is the POP3 and IMAP server. It accepts incoming mail from Postfix and stores it in virtual mailboxes. It is connected to the LDAP for user authentication and lookups.</li>
<li>Cyrus SASL –&gt; Provides authentication for the SMTP server (since users are only allowed to send mail after they authenticated). User and password verification is done via LDAP.</li>
<li>LDAP&nbsp;–&gt; This is the directory service that stores the (virtual) user accounts for the mail server. It uses the <a href="http://www.postfix-buch.com/downloads.php" target="_blank">postfix-book scheme</a>.</li>
<li>Roundcube –&gt; This is a web interface that lets users access their mail via web browser instead of a&nbsp;mail client (Mail User Agent). In addition to a webserver (i.e. Apache) Roundcube requires a database to store user settings (i.e. MySQL).</li>
</ul>
<p><span style="color: #ff0000;">As for this howto, everything is running on a single machine. In real life (especially when you have to deal with a lot of users), it might be better to have dedicated machines for certain services. If you use dedicated machines, however, you have to make sure that the communication between these is secure!</span></p>
<p>&nbsp;</p>
<h2>Basic Prerequisites</h2>
<h4>1. Connectivity</h4>
<p>The server must be connected to the internet and should be accessible through the following ports:</p>
<ul>
<li>25 (SMTP)</li>
<li>80 (HTTP)</li>
<li>110 (POP3)</li>
<li>143 (IMAP)</li>
<li>443 (HTTPS)</li>
</ul>
<p>If you have any firewalls, don’t forget to open the necessary ports.</p>
<h4>2. System Time</h4>
<p>The server should have an accurate system time, i.e. by using NTP.</p>
<h4>3. Hostname</h4>
<p>The server needs a fully-qualified hostname (i.e. mail.example.com), because otherwise foreign mail servers might not accept mails from it. This can be checked with the following command:&nbsp;
			<span id="crayon-55266611cf713073884026" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">hostname</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">f</span></span></span></p>
<p>The hostname can be configured in the following config files:</p>
<ul>
<li>/etc/hostname</li>
<li>/etc/hosts</li>
</ul>
<h4>4. DNS Resolution</h4>
<p>The server must be configured to use a working DNS server. Traditionally, DNS servers have to be added to /etc/resolv.conf, but on Ubuntu these are configured via the Network Manager. Preferably by using the GUI, or by manually editing the config file in /etc/NetworkManager/system-connections.</p>
<h4>5. DNS Records</h4>
<p>The hostname needs to be resolvable in both directions (hostname –&gt; ip &amp; ip –&gt; hostname), so your provider needs to set the following DNS Records for you:</p>
<ul>
<li>A Record (forward lookup, resolvs a hostname to an IPv4 address)</li>
<li>AAAA Record (forward lookup, resolvs a hostname to an IPv6 address)</li>
<li>PTR Record (reverse lookup, resolvs an IP address to a hostname)</li>
<li>MX Record (provides the hostname of a domain’s mail server)</li>
</ul>
<p>This can be checked with the following commands:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf732999056267" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: block;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">dig mail.example.com A +short # should return your server's IPv4 address
dig mail.example.com AAAA +short # should return your server's IPv6 address, if configured
dig -x &lt;ip address&gt; +short # should return your fully-qualified hostname
dig example.com MX +short # should return your mail server's fully-qualified hostname</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf732999056267-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf732999056267-2">2</div><div class="crayon-num" data-line="crayon-55266611cf732999056267-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf732999056267-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf732999056267-1"><span class="crayon-e">dig </span><span class="crayon-v">mail</span><span class="crayon-e">.example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-v">A</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-t">short</span><span class="crayon-h"> </span><span class="crayon-c"># should return your server's IPv4 address</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf732999056267-2"><span class="crayon-e">dig </span><span class="crayon-v">mail</span><span class="crayon-e">.example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-v">AAAA</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-t">short</span><span class="crayon-h"> </span><span class="crayon-c"># should return your server's IPv6 address, if configured</span></div><div class="crayon-line" id="crayon-55266611cf732999056267-3"><span class="crayon-v">dig</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-e">ip </span><span class="crayon-v">address</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-t">short</span><span class="crayon-h"> </span><span class="crayon-c"># should return your fully-qualified hostname</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf732999056267-4"><span class="crayon-e">dig </span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-v">MX</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-t">short</span><span class="crayon-h"> </span><span class="crayon-c"># should return your mail server's fully-qualified hostname</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0034 seconds] -->
<p></p>
<h4>6. Logging</h4>
<p>For troubleshooting it is important that the logging service is working. This is rsyslogd by default, the configuration can be found in /etc/rsyslog.d. By default, mail-related log will go to /var/log/mail.log.</p>
<p>&nbsp;</p>
<h2>LDAP</h2>
<p>A basic LDAP guide can be found here:&nbsp;<a title="Basic OpenLDAP Installation &amp; Configuration" href="http://acidx.net/wordpress/2014/04/basic-openldap-installation-configuration/" target="_blank">basic-openldap-installation-configuration</a></p>
<p>The BaseDN for this howto is “dc=example,dc=com”&nbsp;and it contains two organizationalUnits:</p>
<ul>
<li>“ou=people,dc=example,dc=com” for user accounts (RDN = uniqueIdentifier)</li>
<li>“ou=services,dc=example,dc=com” for service accounts (RDN = uid)
<ul>
<li>You’ll need accounts for postfix, dovecot, saslauthd and roundcube</li>
</ul>
</li>
</ul>
<p>The following screenshots show the LDAP structure, the necessary objectClasses and attributes:</p>
<p><a href="http://acidx.net/wordpress/wp-content/uploads/2014/06/mailserver_ldap_config_01.png" target="_blank"><img class="alignleft wp-image-1630 size-medium" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/mailserver_ldap_config_01-300x195.png" alt="mailserver_ldap_config_01" width="300" height="195"></a></p>
<p><a href="http://acidx.net/wordpress/wp-content/uploads/2014/06/mailserver_ldap_config_02.png" target="_blank"><img class="alignleft wp-image-1631 size-medium" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/mailserver_ldap_config_02-300x163.png" alt="mailserver_ldap_config_02" width="300" height="163"></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>For testing purposes it might be a good idea to create an “allow everything” ACL (
			<span id="crayon-55266611cf745181271895" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-sy">{</span><span class="crayon-cn">0</span><span class="crayon-sy">}</span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e ">by *</span><span class="crayon-h"> </span><span class="crayon-v">write</span></span></span>) — see the LDAP guide for that — but <span style="color: #ff0000;">keep in mind that everyone who has access to the LDAP server will be able to read and edit the whole directory. So don’t forget to create appropiate ACLs before you put the server into productive operation!</span></p>
<p>&nbsp;</p>
<h2>Postfix</h2>
<h4>1. Installation</h4>
<p>Install Postfix and the extensions for Pearl Compatible Regular Expressions and LDAP Connections. During installation select the “No Configuration” option:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf758667907191" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button crayon-pressed" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important; margin-top: -18px; display: none;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 1; opacity: 1; overflow: hidden; height: 15px;">apt-get install postfix postfix-pcre postfix-ldap</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 0; overflow: hidden; opacity: 0;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf758667907191-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf758667907191-1"><span class="crayon-v">apt</span><span class="crayon-o">-</span><span class="crayon-r">get</span><span class="crayon-h"> </span><span class="crayon-e">install </span><span class="crayon-e">postfix </span><span class="crayon-v">postfix</span><span class="crayon-o">-</span><span class="crayon-e">pcre </span><span class="crayon-v">postfix</span><span class="crayon-o">-</span><span class="crayon-v">ldap</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p>Optionally, you can install extra tools for managing mailboxes (mutt) and sending testmails (swaks):</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf768108205835" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">apt-get install mutt swaks</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf768108205835-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf768108205835-1"><span class="crayon-v">apt</span><span class="crayon-o">-</span><span class="crayon-r">get</span><span class="crayon-h"> </span><span class="crayon-e">install </span><span class="crayon-e">mutt </span><span class="crayon-v">swaks</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<h4>2. Configuration</h4>
<p>Before Postfix can be started, some configuration files need to be created in /etc/postfix:</p>
<ul>
<li>main.cf –&gt; This is the main configuration file for Postfix (<a href="http://www.postfix.org/postconf.5.html" target="_blank">parameter documentation</a>)<br>
<!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf772997543325" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">###################################################################################################
### Base Settings ###
#####################

# Listen on all interfaces
inet_interfaces = all

# Use TCP IPv4
inet_protocols = ipv4

# Greet connecting clients with this banner
smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)

# Fully-qualified hostname
myhostname = mail.example.com

# Do not append domain part to incomplete addresses (this is the MUA's job)
append_dot_mydomain = no

# Trusted networks/hosts (these are allowed to relay without authentication)
mynetworks =
    # Local
    127.0.0.0/8
    # External
    1.2.3.4/32


###################################################################################################
### Local Transport ###
#######################

# Disable local transport (so that system accounts can't receive mail)
local_transport = error:Local Transport Disabled

# Don't use local alias maps
alias_maps = 

# Local domain (could be omitted, since it is automatically derived from $myhostname)
mydomain = example.com

# Mails for these domains will be transported locally
mydestination =
    $myhostname
    localhost.$mydomain
    localhost


###################################################################################################
### Virtual Transport ###
#########################

# Deliver mail for virtual recipients to Dovecot
virtual_transport = dovecot

# Process one mail at one time
dovecot_destination_recipient_limit = 1

# Valid virtual domains
virtual_mailbox_domains = hash:/etc/postfix/virtual_domains

# Valid virtual recipients
virtual_mailbox_maps = proxy:ldap:/etc/postfix/ldap_virtual_recipients.cf

# Virtual aliases
virtual_alias_maps = proxy:ldap:/etc/postfix/ldap_virtual_aliases.cf


###################################################################################################
### ESMTP Settings ###
######################

### SASL ###

# Enable SASL (required for SMTP authentication)
smtpd_sasl_auth_enable = yes

# Enable SASL for Outlook-Clients as well
broken_sasl_auth_clients = yes

### TLS ###

# Enable TLS (required to encrypt the plaintext SASL authentication)
smtpd_tls_security_level = may

# Only offer SASL in a TLS session
smtpd_tls_auth_only = yes

# Certification Authority
smtpd_tls_CAfile = /etc/postfix/certs/example-cacert.pem

# Public Certificate
smtpd_tls_cert_file = /etc/postfix/certs/mail_public_cert.pem

# Private Key (without passphrase)
smtpd_tls_key_file = /etc/postfix/certs/mail_private_key.pem

# Randomizer for key creation
tls_random_source = dev:/dev/urandom

# TLS related logging (set to 2 for debugging)
smtpd_tls_loglevel = 0

# Avoid Denial-Of-Service-Attacks
smtpd_client_new_tls_session_rate_limit = 10

# Activate TLS Session Cache
smtpd_tls_session_cache_database = btree:/etc/postfix/smtpd_session_cache

# Deny some TLS-Ciphers
smtpd_tls_exclude_ciphers =
        EXP
        EDH-RSA-DES-CBC-SHA
        ADH-DES-CBC-SHA
        DES-CBC-SHA
        SEED-SHA

# Diffie-Hellman Parameters for Perfect Forward Secrecy
# Can be created with:
# openssl dhparam -2 -out dh_512.pem 512
# openssl dhparam -2 -out dh_1024.pem 1024
smtpd_tls_dh512_param_file = ${config_directory}/certs/dh_512.pem
smtpd_tls_dh1024_param_file = ${config_directory}/certs/dh_1024.pem


###################################################################################################
### Connection Policies ###
###########################

# Reject Early Talkers
postscreen_greet_action = enforce


###################################################################################################
### Session Policies ###
########################

# Recipient Restrictions (RCPT TO related)
smtpd_recipient_restrictions =
        reject_non_fqdn_recipient
        reject_unknown_recipient_domain
        reject_unauth_destination
        # Allow relaying for SASL authenticated clients and trusted hosts/networks
        # This can be put to smtpd_relay_restrictions in Postfix 2.10 and later 
        permit_sasl_authenticated
        permit_mynetworks
        # Reject the following hosts
        check_sender_ns_access cidr:/etc/postfix/drop.cidr
        check_sender_mx_access cidr:/etc/postfix/drop.cidr
        # Additional blacklist
        reject_rbl_client ix.dnsbl.manitu.net
        # Finally permit (relaying still requires SASL auth)
        permit

# Reject the request if the sender is the null address and there are multiple recipients
smtpd_data_restrictions = reject_multi_recipient_bounce

# Sender Restrictions
smtpd_sender_restrictions =
        reject_non_fqdn_sender
        reject_unknown_sender_domain

# HELO/EHLO Restrictions
smtpd_helo_restrictions =
		permit_mynetworks
        check_helo_access pcre:/etc/postfix/identitycheck.pcre
        #reject_non_fqdn_helo_hostname
        reject_invalid_hostname

# Deny VRFY recipient checks
disable_vrfy_command = yes

# Require HELO
smtpd_helo_required = yes

# Reject instantly if a restriction applies (do not wait until RCPT TO)
smtpd_delay_reject = no

# Client Restrictions (IP Blacklist)
smtpd_client_restrictions = check_client_access cidr:/etc/postfix/drop.cidr</textarea></div>
			<div class="crayon-main" style="max-height: 250px; position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf772997543325-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-2">2</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-4">4</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-6">6</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-8">8</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-10">10</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-12">12</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-14">14</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-16">16</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-18">18</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-20">20</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-22">22</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-24">24</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-26">26</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-28">28</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-30">30</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-32">32</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-34">34</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-36">36</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-38">38</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-40">40</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-42">42</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-44">44</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-46">46</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-48">48</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-50">50</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-52">52</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-54">54</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-56">56</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-58">58</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-60">60</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-62">62</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-64">64</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-66">66</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-68">68</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-70">70</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-72">72</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-74">74</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-76">76</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-78">78</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-80">80</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-82">82</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-84">84</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-86">86</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-88">88</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-90">90</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-92">92</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-94">94</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-96">96</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-98">98</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-100">100</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-102">102</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-104">104</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-106">106</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-108">108</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-110">110</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-112">112</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-114">114</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-116">116</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-118">118</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-120">120</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-122">122</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-124">124</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-126">126</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-128">128</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-130">130</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-132">132</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-134">134</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-136">136</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-138">138</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-140">140</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-142">142</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-144">144</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-146">146</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-148">148</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-150">150</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-152">152</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-154">154</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-156">156</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-158">158</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-160">160</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-162">162</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-164">164</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-166">166</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-168">168</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-170">170</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-172">172</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-174">174</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-176">176</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf772997543325-178">178</div><div class="crayon-num" data-line="crayon-55266611cf772997543325-179">179</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf772997543325-1"><span class="crayon-p">###################################################################################################</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-2"><span class="crayon-p">### Base Settings ###</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-3"><span class="crayon-p">#####################</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-4">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-5"><span class="crayon-p"># Listen on all interfaces</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-6"><span class="crayon-v">inet_interfaces</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">all</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-8"><span class="crayon-p"># Use TCP IPv4</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-9"><span class="crayon-v">inet_protocols</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ipv4</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-10">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-11"><span class="crayon-p"># Greet connecting clients with this banner</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-12"><span class="crayon-v">smtpd_banner</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">myhostname </span><span class="crayon-i">ESMTP</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">mail_name</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Ubuntu</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-14"><span class="crayon-p"># Fully-qualified hostname</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-15"><span class="crayon-v">myhostname</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mail</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-16">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-17"><span class="crayon-p"># Do not append domain part to incomplete addresses (this is the MUA's job)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-18"><span class="crayon-v">append_dot_mydomain</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">no</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-20"><span class="crayon-p"># Trusted networks/hosts (these are allowed to relay without authentication)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-21"><span class="crayon-v">mynetworks</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># Local</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">127.0.0.0</span><span class="crayon-o">/</span><span class="crayon-cn">8</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># External</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1.2.3.4</span><span class="crayon-o">/</span><span class="crayon-cn">32</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-26">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-28"><span class="crayon-p">###################################################################################################</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-29"><span class="crayon-p">### Local Transport ###</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-30"><span class="crayon-p">#######################</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-32"><span class="crayon-p"># Disable local transport (so that system accounts can't receive mail)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-33"><span class="crayon-v">local_transport</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">error</span><span class="crayon-o">:</span><span class="crayon-e">Local </span><span class="crayon-e">Transport </span><span class="crayon-v">Disabled</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-34">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-35"><span class="crayon-p"># Don't use local alias maps</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-36"><span class="crayon-v">alias_maps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-55266611cf772997543325-37">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-38"><span class="crayon-p"># Local domain (could be omitted, since it is automatically derived from $myhostname)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-39"><span class="crayon-v">mydomain</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-40">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-41"><span class="crayon-p"># Mails for these domains will be transported locally</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-42"><span class="crayon-v">mydestination</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-e">myhostname</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-44"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">localhost</span><span class="crayon-sy">.</span><span class="crayon-sy">$</span><span class="crayon-e">mydomain</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-45"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">localhost</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-46">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-47">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-48"><span class="crayon-p">###################################################################################################</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-49"><span class="crayon-p">### Virtual Transport ###</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-50"><span class="crayon-p">#########################</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-51">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-52"><span class="crayon-p"># Deliver mail for virtual recipients to Dovecot</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-53"><span class="crayon-v">virtual_transport</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dovecot</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-54">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-55"><span class="crayon-p"># Process one mail at one time</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-56"><span class="crayon-v">dovecot_destination_recipient_limit</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-57">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-58"><span class="crayon-p"># Valid virtual domains</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-59"><span class="crayon-v">virtual_mailbox_domains</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">hash</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">virtual_domains</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-60">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-61"><span class="crayon-p"># Valid virtual recipients</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-62"><span class="crayon-v">virtual_mailbox_maps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">proxy</span><span class="crayon-o">:</span><span class="crayon-v">ldap</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">ldap_virtual_recipients</span><span class="crayon-sy">.</span><span class="crayon-v">cf</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-63">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-64"><span class="crayon-p"># Virtual aliases</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-65"><span class="crayon-v">virtual_alias_maps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">proxy</span><span class="crayon-o">:</span><span class="crayon-v">ldap</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">ldap_virtual_aliases</span><span class="crayon-sy">.</span><span class="crayon-v">cf</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-66">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-67">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-68"><span class="crayon-p">###################################################################################################</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-69"><span class="crayon-p">### ESMTP Settings ###</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-70"><span class="crayon-p">######################</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-71">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-72"><span class="crayon-p">### SASL ###</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-73">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-74"><span class="crayon-p"># Enable SASL (required for SMTP authentication)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-75"><span class="crayon-v">smtpd_sasl_auth_enable</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">yes</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-76">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-77"><span class="crayon-p"># Enable SASL for Outlook-Clients as well</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-78"><span class="crayon-v">broken_sasl_auth_clients</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">yes</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-79">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-80"><span class="crayon-p">### TLS ###</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-81">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-82"><span class="crayon-p"># Enable TLS (required to encrypt the plaintext SASL authentication)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-83"><span class="crayon-v">smtpd_tls_security_level</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">may</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-84">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-85"><span class="crayon-p"># Only offer SASL in a TLS session</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-86"><span class="crayon-v">smtpd_tls_auth_only</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">yes</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-88"><span class="crayon-p"># Certification Authority</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-89"><span class="crayon-v">smtpd_tls_CAfile</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">certs</span><span class="crayon-o">/</span><span class="crayon-v">example</span><span class="crayon-o">-</span><span class="crayon-v">cacert</span><span class="crayon-sy">.</span><span class="crayon-v">pem</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-90">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-91"><span class="crayon-p"># Public Certificate</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-92"><span class="crayon-v">smtpd_tls_cert_file</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">certs</span><span class="crayon-o">/</span><span class="crayon-v">mail_public_cert</span><span class="crayon-sy">.</span><span class="crayon-v">pem</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-93">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-94"><span class="crayon-p"># Private Key (without passphrase)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-95"><span class="crayon-v">smtpd_tls_key_file</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">certs</span><span class="crayon-o">/</span><span class="crayon-v">mail_private_key</span><span class="crayon-sy">.</span><span class="crayon-v">pem</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-96">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-97"><span class="crayon-p"># Randomizer for key creation</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-98"><span class="crayon-v">tls_random_source</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dev</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">dev</span><span class="crayon-o">/</span><span class="crayon-v">urandom</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-99">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-100"><span class="crayon-p"># TLS related logging (set to 2 for debugging)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-101"><span class="crayon-v">smtpd_tls_loglevel</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-102">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-103"><span class="crayon-p"># Avoid Denial-Of-Service-Attacks</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-104"><span class="crayon-v">smtpd_client_new_tls_session_rate_limit</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">10</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-105">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-106"><span class="crayon-p"># Activate TLS Session Cache</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-107"><span class="crayon-v">smtpd_tls_session_cache_database</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">btree</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">smtpd_session_cache</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-108">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-109"><span class="crayon-p"># Deny some TLS-Ciphers</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-110"><span class="crayon-v">smtpd_tls_exclude_ciphers</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">EXP</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-112"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">EDH</span><span class="crayon-o">-</span><span class="crayon-v">RSA</span><span class="crayon-o">-</span><span class="crayon-v">DES</span><span class="crayon-o">-</span><span class="crayon-v">CBC</span><span class="crayon-o">-</span><span class="crayon-e">SHA</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-113"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">ADH</span><span class="crayon-o">-</span><span class="crayon-v">DES</span><span class="crayon-o">-</span><span class="crayon-v">CBC</span><span class="crayon-o">-</span><span class="crayon-e">SHA</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-114"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">DES</span><span class="crayon-o">-</span><span class="crayon-v">CBC</span><span class="crayon-o">-</span><span class="crayon-e">SHA</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-115"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">SEED</span><span class="crayon-o">-</span><span class="crayon-v">SHA</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-116">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-117"><span class="crayon-p"># Diffie-Hellman Parameters for Perfect Forward Secrecy</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-118"><span class="crayon-p"># Can be created with:</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-119"><span class="crayon-p"># openssl dhparam -2 -out dh_512.pem 512</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-120"><span class="crayon-p"># openssl dhparam -2 -out dh_1024.pem 1024</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-121"><span class="crayon-v">smtpd_tls_dh512_param_file</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">config_directory</span><span class="crayon-sy">}</span><span class="crayon-o">/</span><span class="crayon-v">certs</span><span class="crayon-o">/</span><span class="crayon-v">dh_512</span><span class="crayon-sy">.</span><span class="crayon-e">pem</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-122"><span class="crayon-v">smtpd_tls_dh1024_param_file</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">config_directory</span><span class="crayon-sy">}</span><span class="crayon-o">/</span><span class="crayon-v">certs</span><span class="crayon-o">/</span><span class="crayon-v">dh_1024</span><span class="crayon-sy">.</span><span class="crayon-v">pem</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-123">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-124">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-125"><span class="crayon-p">###################################################################################################</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-126"><span class="crayon-p">### Connection Policies ###</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-127"><span class="crayon-p">###########################</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-128">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-129"><span class="crayon-p"># Reject Early Talkers</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-130"><span class="crayon-v">postscreen_greet_action</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">enforce</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-131">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-132">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-133"><span class="crayon-p">###################################################################################################</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-134"><span class="crayon-p">### Session Policies ###</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-135"><span class="crayon-p">########################</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-136">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-137"><span class="crayon-p"># Recipient Restrictions (RCPT TO related)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-138"><span class="crayon-v">smtpd_recipient_restrictions</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">reject_non_fqdn_recipient</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-140"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">reject_unknown_recipient_domain</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-141"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">reject_unauth_destination</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># Allow relaying for SASL authenticated clients and trusted hosts/networks</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># This can be put to smtpd_relay_restrictions in Postfix 2.10 and later </span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">permit_sasl_authenticated</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-145"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">permit_mynetworks</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># Reject the following hosts</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">check_sender_ns_access </span><span class="crayon-v">cidr</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">drop</span><span class="crayon-sy">.</span><span class="crayon-e">cidr</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-148"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">check_sender_mx_access </span><span class="crayon-v">cidr</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">drop</span><span class="crayon-sy">.</span><span class="crayon-v">cidr</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># Additional blacklist</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">reject_rbl_client </span><span class="crayon-v">ix</span><span class="crayon-sy">.</span><span class="crayon-v">dnsbl</span><span class="crayon-sy">.</span><span class="crayon-v">manitu</span><span class="crayon-sy">.</span><span class="crayon-v">net</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># Finally permit (relaying still requires SASL auth)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">permit</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-153">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-154"><span class="crayon-p"># Reject the request if the sender is the null address and there are multiple recipients</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-155"><span class="crayon-v">smtpd_data_restrictions</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">reject_multi_recipient_bounce</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-156">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-157"><span class="crayon-p"># Sender Restrictions</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-158"><span class="crayon-v">smtpd_sender_restrictions</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">reject_non_fqdn_sender</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-160"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">reject_unknown_sender_domain</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-161">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-162"><span class="crayon-p"># HELO/EHLO Restrictions</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-163"><span class="crayon-v">smtpd_helo_restrictions</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-164"><span class="crayon-h">		</span><span class="crayon-e">permit_mynetworks</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-165"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">check_helo_access </span><span class="crayon-v">pcre</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">identitycheck</span><span class="crayon-sy">.</span><span class="crayon-v">pcre</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-166"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#reject_non_fqdn_helo_hostname</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-167"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">reject_invalid_hostname</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-168">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-169"><span class="crayon-p"># Deny VRFY recipient checks</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-170"><span class="crayon-v">disable_vrfy_command</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">yes</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-171">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-172"><span class="crayon-p"># Require HELO</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-173"><span class="crayon-v">smtpd_helo_required</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">yes</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-174">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf772997543325-175"><span class="crayon-p"># Reject instantly if a restriction applies (do not wait until RCPT TO)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-176"><span class="crayon-v">smtpd_delay_reject</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">no</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-177">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf772997543325-178"><span class="crayon-p"># Client Restrictions (IP Blacklist)</span></div><div class="crayon-line" id="crayon-55266611cf772997543325-179"><span class="crayon-v">smtpd_client_restrictions</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">check_client_access </span><span class="crayon-v">cidr</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">drop</span><span class="crayon-sy">.</span><span class="crayon-v">cidr</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0298 seconds] -->

</li>
<li>virtual_domains –&gt; Contains the domains the server takes mails for<br>
<!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf782636396278" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;"># Domain		Anything

example.com		OK</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf782636396278-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf782636396278-2">2</div><div class="crayon-num" data-line="crayon-55266611cf782636396278-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf782636396278-1"><span class="crayon-p"># Domain		Anything</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf782636396278-2">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf782636396278-3"><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com		</span><span class="crayon-v">OK</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->

</li>
<li>ldap_virtual_recipients.cf –&gt; LDAP query for recipient validation<br>
<!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf798002388575" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">bind = yes
bind_dn = uid=postfix,ou=services,dc=example,dc=com
bind_pw = secret
server_host = ldap://127.0.0.1:389
search_base = ou=people,dc=example,dc=com
domain = example.com
query_filter = (&amp;(mail=%s)(mailEnabled=TRUE))
result_attribute = mail</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf798002388575-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf798002388575-2">2</div><div class="crayon-num" data-line="crayon-55266611cf798002388575-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf798002388575-4">4</div><div class="crayon-num" data-line="crayon-55266611cf798002388575-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf798002388575-6">6</div><div class="crayon-num" data-line="crayon-55266611cf798002388575-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf798002388575-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf798002388575-1"><span class="crayon-v">bind</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">yes</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf798002388575-2"><span class="crayon-v">bind_dn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">uid</span><span class="crayon-o">=</span><span class="crayon-v">postfix</span><span class="crayon-sy">,</span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">services</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line" id="crayon-55266611cf798002388575-3"><span class="crayon-v">bind_pw</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">secret</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf798002388575-4"><span class="crayon-v">server_host</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ldap</span><span class="crayon-o">:</span><span class="crayon-c">//127.0.0.1:389</span></div><div class="crayon-line" id="crayon-55266611cf798002388575-5"><span class="crayon-v">search_base</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">people</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf798002388575-6"><span class="crayon-v">domain</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com</span></div><div class="crayon-line" id="crayon-55266611cf798002388575-7"><span class="crayon-v">query_filter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-sy">(</span><span class="crayon-v">mail</span><span class="crayon-o">=</span><span class="crayon-o">%</span><span class="crayon-v">s</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">mailEnabled</span><span class="crayon-o">=</span><span class="crayon-t">TRUE</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf798002388575-8"><span class="crayon-v">result_attribute</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mail</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0048 seconds] -->

</li>
<li>ldap_virtual_aliases.cf –&gt; LDAP query to get aliases and forwarding addresses (forwarding&nbsp;can be achieved by putting the external address into the “email” field in the LDAP-Account and copying the main address from the “mail” field into an “aliasMail” field.)<br>
<!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf7a3024351903" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">bind = yes
bind_dn = uid=postfix,ou=services,dc=example,dc=com
bind_pw = secret
server_host = ldap://127.0.0.1:389
search_base = ou=people,dc=example,dc=com
domain = example.com
query_filter = (&amp;(mailAlias=%s)(mailEnabled=TRUE))
result_attribute = mail, email</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf7a3024351903-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7a3024351903-2">2</div><div class="crayon-num" data-line="crayon-55266611cf7a3024351903-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7a3024351903-4">4</div><div class="crayon-num" data-line="crayon-55266611cf7a3024351903-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7a3024351903-6">6</div><div class="crayon-num" data-line="crayon-55266611cf7a3024351903-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7a3024351903-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf7a3024351903-1"><span class="crayon-v">bind</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">yes</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7a3024351903-2"><span class="crayon-v">bind_dn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">uid</span><span class="crayon-o">=</span><span class="crayon-v">postfix</span><span class="crayon-sy">,</span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">services</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line" id="crayon-55266611cf7a3024351903-3"><span class="crayon-v">bind_pw</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">secret</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7a3024351903-4"><span class="crayon-v">server_host</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ldap</span><span class="crayon-o">:</span><span class="crayon-c">//127.0.0.1:389</span></div><div class="crayon-line" id="crayon-55266611cf7a3024351903-5"><span class="crayon-v">search_base</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">people</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7a3024351903-6"><span class="crayon-v">domain</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com</span></div><div class="crayon-line" id="crayon-55266611cf7a3024351903-7"><span class="crayon-v">query_filter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-sy">(</span><span class="crayon-v">mailAlias</span><span class="crayon-o">=</span><span class="crayon-o">%</span><span class="crayon-v">s</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">mailEnabled</span><span class="crayon-o">=</span><span class="crayon-t">TRUE</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7a3024351903-8"><span class="crayon-v">result_attribute</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mail</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">email</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0049 seconds] -->

</li>
<li>identitycheck.pcre –&gt; Regular expression to block clients that use your hostname<br>
<!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf7b3689081935" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;"># Identity (RegEx)		Action

/^(mail\.example\.com)$/	REJECT Hostname Abuse: $1
/^(1\.2\.3\.4)$/		REJECT Hostname Abuse: $1
/^(\[1\.2\.3\.4\])$/		REJECT Hostname Abuse: $1</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf7b3689081935-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7b3689081935-2">2</div><div class="crayon-num" data-line="crayon-55266611cf7b3689081935-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7b3689081935-4">4</div><div class="crayon-num" data-line="crayon-55266611cf7b3689081935-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf7b3689081935-1"><span class="crayon-p"># Identity (RegEx)		Action</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7b3689081935-2">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf7b3689081935-3"><span class="crayon-o">/</span><span class="crayon-o">^</span><span class="crayon-sy">(</span><span class="crayon-v">mail</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-o">/</span><span class="crayon-h">	</span><span class="crayon-e">REJECT </span><span class="crayon-e">Hostname </span><span class="crayon-v">Abuse</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7b3689081935-4"><span class="crayon-o">/</span><span class="crayon-o">^</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-cn">2</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-cn">3</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-cn">4</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-o">/</span><span class="crayon-h">		</span><span class="crayon-e">REJECT </span><span class="crayon-e">Hostname </span><span class="crayon-v">Abuse</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-55266611cf7b3689081935-5"><span class="crayon-o">/</span><span class="crayon-o">^</span><span class="crayon-sy">(</span><span class="crayon-sy">\</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-cn">2</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-cn">3</span><span class="crayon-sy">\</span><span class="crayon-sy">.</span><span class="crayon-cn">4</span><span class="crayon-sy">\</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-o">/</span><span class="crayon-h">		</span><span class="crayon-e">REJECT </span><span class="crayon-e">Hostname </span><span class="crayon-v">Abuse</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-cn">1</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0043 seconds] -->

</li>
<li>drop.cidr –&gt; Contains blacklisted IP addresses<br>
<!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf7bd805091623" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;"># IP/CIDR			Action

1.2.3.0/24			REJECT Blacklisted</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf7bd805091623-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7bd805091623-2">2</div><div class="crayon-num" data-line="crayon-55266611cf7bd805091623-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf7bd805091623-1"><span class="crayon-p"># IP/CIDR			Action</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7bd805091623-2">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf7bd805091623-3"><span class="crayon-cn">1.2.3.0</span><span class="crayon-o">/</span><span class="crayon-cn">24</span><span class="crayon-h">			</span><span class="crayon-e">REJECT </span><span class="crayon-v">Blacklisted</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->

</li>
</ul>
<p>Since Dovecot and TLS are not configured yet, temporarily comment out the following lines in main.cf:</p>
<ul>
<li>dovecot_destination_recipient_limit = 1</li>
<li>smtpd_tls_security_level = may</li>
<li>smtpd_tls_auth_only = yes</li>
<li>smtpd_tls_CAfile = /etc/postfix/certs/example-cacert.pem</li>
<li>smtpd_tls_cert_file = /etc/postfix/certs/mail_public_cert.pem</li>
<li>smtpd_tls_key_file = /etc/postfix/certs/mail_private_key.pem</li>
</ul>
<h4>3. Hashmap Creation</h4>
<p>Certain maps (i.e. hashmaps) need to be converted to .db files before they can be used by Postfix. In main.cf the virtual_domains file is called as a hashmap, so it needs to be converted:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf7c8193167597" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">postmap hash:/etc/postfix/virtual_domains</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf7c8193167597-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf7c8193167597-1"><span class="crayon-e">postmap </span><span class="crayon-r">hash</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">virtual_domains</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p></p>
<h4>4. Starting Postfix</h4>
<p>Start Postfix with the following command:&nbsp;
			<span id="crayon-55266611cf7d2663077868" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">service </span><span class="crayon-e">postfix </span><span class="crayon-v">start</span></span></span></p>
<p>Check if it is running:&nbsp;
			<span id="crayon-55266611cf7dc240569417" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">lsof</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">Pni</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-cn">25</span></span></span></p>
<p>Have a look at /var/log/mail.log to see if there are any errors.</p>
<h4>5. SMTP Connection Test</h4>
<p>Use Telnet to connect to the SMTP server:&nbsp;
			<span id="crayon-55266611cf7e5994710349" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-i">telnet</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span><span class="crayon-h"> </span><span class="crayon-cn">25</span></span></span>. When you are connected, send an 
			<span id="crayon-55266611cf7ef671170512" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">EHLO </span><span class="crayon-v">client</span></span></span>. You should get the following response:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf7f9993653509" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
220 mail.example.com ESMTP Postfix (Ubuntu)
EHLO client
250-mail.example.com
250-PIPELINING
250-SIZE 10240000
250-ETRN
250-AUTH DIGEST-MD5 NTLM CRAM-MD5 LOGIN PLAIN
250-AUTH=DIGEST-MD5 NTLM CRAM-MD5 LOGIN PLAIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN
QUIT
221 2.0.0 Bye</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-2">2</div><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-4">4</div><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-6">6</div><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-8">8</div><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-10">10</div><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-12">12</div><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-14">14</div><div class="crayon-num" data-line="crayon-55266611cf7f9993653509-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf7f9993653509-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf7f9993653509-1"><span class="crayon-i">Trying</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1...</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-2"><span class="crayon-e">Connected </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1.</span></div><div class="crayon-line" id="crayon-55266611cf7f9993653509-3"><span class="crayon-e">Escape </span><span class="crayon-e">character </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-s">'^]'</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-4"><span class="crayon-cn">220</span><span class="crayon-h"> </span><span class="crayon-v">mail</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com </span><span class="crayon-e">ESMTP </span><span class="crayon-e">Postfix</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Ubuntu</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-55266611cf7f9993653509-5"><span class="crayon-e">EHLO </span><span class="crayon-i">client</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-6"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-v">mail</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-i">com</span></div><div class="crayon-line" id="crayon-55266611cf7f9993653509-7"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">PIPELINING</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-8"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">SIZE</span><span class="crayon-h"> </span><span class="crayon-cn">10240000</span></div><div class="crayon-line" id="crayon-55266611cf7f9993653509-9"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">ETRN</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-10"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-e">AUTH </span><span class="crayon-v">DIGEST</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">NTLM </span><span class="crayon-v">CRAM</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">LOGIN </span><span class="crayon-i">PLAIN</span></div><div class="crayon-line" id="crayon-55266611cf7f9993653509-11"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-v">AUTH</span><span class="crayon-o">=</span><span class="crayon-v">DIGEST</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">NTLM </span><span class="crayon-v">CRAM</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">LOGIN </span><span class="crayon-i">PLAIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-12"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">ENHANCEDSTATUSCODES</span></div><div class="crayon-line" id="crayon-55266611cf7f9993653509-13"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-cn">8BITMIME</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-14"><span class="crayon-cn">250</span><span class="crayon-h"> </span><span class="crayon-e">DSN</span></div><div class="crayon-line" id="crayon-55266611cf7f9993653509-15"><span class="crayon-i">QUIT</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf7f9993653509-16"><span class="crayon-cn">221</span><span class="crayon-h"> </span><span class="crayon-cn">2.0.0</span><span class="crayon-h"> </span><span class="crayon-v">Bye</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0054 seconds] -->
<p></p>
<h4>6. LDAP Lookup Test</h4>
<p>With this test you can find out if Postfix is able to query the LDAP server:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf803307536387" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">postmap -q alice@example.com ldap:/etc/postfix/ldap_virtual_recipients.cf
postmap -q postmaster@example.com ldap:/etc/postfix/ldap_virtual_aliases.cf</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf803307536387-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf803307536387-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf803307536387-1"><span class="crayon-v">postmap</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">q</span><span class="crayon-h"> </span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-v">ldap</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">ldap_virtual_recipients</span><span class="crayon-e">.cf</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf803307536387-2"><span class="crayon-v">postmap</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">q</span><span class="crayon-h"> </span><span class="crayon-v">postmaster</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-v">ldap</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">ldap_virtual_aliases</span><span class="crayon-e">.cf</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0029 seconds] -->
<p>Both of the above commands should return “alice@example.com”, because …</p>
<ol>
<li>there is an LDAP entry with “mail = alice@example.com”, so it is a valid recipient and</li>
<li>there is an LDAP entry with “mailAlias = postmaster@example.com”, which is an alias address for “alice@example.com”.</li>
</ol>
<h4>7. Useful Commands</h4>
<p>Config-related:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf80d820588165" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;"># Show all Postfix parameters and their effective values
postconf

# Show value for the given parameter
postconf smtpd_tls_security_level

# Show all parameters that have been explicitly set in main.cf
postconf -n

# Show all default values
postconf -d

# Show default value of the given parameter
postconf -d alias_maps</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf80d820588165-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf80d820588165-2">2</div><div class="crayon-num" data-line="crayon-55266611cf80d820588165-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf80d820588165-4">4</div><div class="crayon-num" data-line="crayon-55266611cf80d820588165-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf80d820588165-6">6</div><div class="crayon-num" data-line="crayon-55266611cf80d820588165-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf80d820588165-8">8</div><div class="crayon-num" data-line="crayon-55266611cf80d820588165-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf80d820588165-10">10</div><div class="crayon-num" data-line="crayon-55266611cf80d820588165-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf80d820588165-12">12</div><div class="crayon-num" data-line="crayon-55266611cf80d820588165-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf80d820588165-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf80d820588165-1"><span class="crayon-c"># Show all Postfix parameters and their effective values</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf80d820588165-2"><span class="crayon-v">postconf</span></div><div class="crayon-line" id="crayon-55266611cf80d820588165-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf80d820588165-4"><span class="crayon-c"># Show value for the given parameter</span></div><div class="crayon-line" id="crayon-55266611cf80d820588165-5"><span class="crayon-e">postconf </span><span class="crayon-v">smtpd_tls_security_level</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf80d820588165-6">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf80d820588165-7"><span class="crayon-c"># Show all parameters that have been explicitly set in main.cf</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf80d820588165-8"><span class="crayon-v">postconf</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">n</span></div><div class="crayon-line" id="crayon-55266611cf80d820588165-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf80d820588165-10"><span class="crayon-c"># Show all default values</span></div><div class="crayon-line" id="crayon-55266611cf80d820588165-11"><span class="crayon-v">postconf</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">d</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf80d820588165-12">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf80d820588165-13"><span class="crayon-c"># Show default value of the given parameter</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf80d820588165-14"><span class="crayon-v">postconf</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-v">alias_maps</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->
<p>Queue-related:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf818934101674" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;"># Show mails that are currently queued
postqueue -p

# Flush the queue (try to send)
postqueue -f

# Delete a mail from the queue (ids can be found in mail.log)
postsuper -d &lt;id&gt;

# Delete all mails from the queue
postsuper -d ALL</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf818934101674-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf818934101674-2">2</div><div class="crayon-num" data-line="crayon-55266611cf818934101674-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf818934101674-4">4</div><div class="crayon-num" data-line="crayon-55266611cf818934101674-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf818934101674-6">6</div><div class="crayon-num" data-line="crayon-55266611cf818934101674-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf818934101674-8">8</div><div class="crayon-num" data-line="crayon-55266611cf818934101674-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf818934101674-10">10</div><div class="crayon-num" data-line="crayon-55266611cf818934101674-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf818934101674-1"><span class="crayon-c"># Show mails that are currently queued</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf818934101674-2"><span class="crayon-v">postqueue</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p</span></div><div class="crayon-line" id="crayon-55266611cf818934101674-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf818934101674-4"><span class="crayon-c"># Flush the queue (try to send)</span></div><div class="crayon-line" id="crayon-55266611cf818934101674-5"><span class="crayon-v">postqueue</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">f</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf818934101674-6">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf818934101674-7"><span class="crayon-c"># Delete a mail from the queue (ids can be found in mail.log)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf818934101674-8"><span class="crayon-v">postsuper</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-r">id</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-55266611cf818934101674-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf818934101674-10"><span class="crayon-c"># Delete all mails from the queue</span></div><div class="crayon-line" id="crayon-55266611cf818934101674-11"><span class="crayon-v">postsuper</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-v">ALL</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->
<p>&nbsp;</p>
<h2>Dovecot</h2>
<h4>1. Installation</h4>
<p>Install Dovecot and the necessary extensions. During installation, you will be asked if a certificate should be created.&nbsp;If you skip this, you can add your own certificate later.</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf822037290154" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important; margin-top: -18px; display: none;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">apt-get install dovecot-core dovecot-imapd dovecot-pop3d dovecot-lmtpd dovecot-ldap</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf822037290154-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf822037290154-1"><span class="crayon-v">apt</span><span class="crayon-o">-</span><span class="crayon-r">get</span><span class="crayon-h"> </span><span class="crayon-e">install </span><span class="crayon-v">dovecot</span><span class="crayon-o">-</span><span class="crayon-e">core </span><span class="crayon-v">dovecot</span><span class="crayon-o">-</span><span class="crayon-e">imapd </span><span class="crayon-v">dovecot</span><span class="crayon-o">-</span><span class="crayon-e">pop3d </span><span class="crayon-v">dovecot</span><span class="crayon-o">-</span><span class="crayon-e">lmtpd </span><span class="crayon-v">dovecot</span><span class="crayon-o">-</span><span class="crayon-v">ldap</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->
<p></p>
<h4>2. Configuration</h4>
<p>Disable unwanted protocols (IMAPS and POP3S) by setting the ports to 0 in /etc/dovecot/conf.d/10-master.conf. Also, set the permissions, user and group for the authentication-userdb:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf82c292347514" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">inet_listener imaps {
    port = 0
    #port = 993
    #ssl = yes
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf82c292347514-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf82c292347514-2">2</div><div class="crayon-num" data-line="crayon-55266611cf82c292347514-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf82c292347514-4">4</div><div class="crayon-num" data-line="crayon-55266611cf82c292347514-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf82c292347514-1"><span class="crayon-e">inet_listener</span><span class="crayon-h"> </span><span class="crayon-e">imaps</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf82c292347514-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">port</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-55266611cf82c292347514-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#port = 993</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf82c292347514-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ssl = yes</span></div><div class="crayon-line" id="crayon-55266611cf82c292347514-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf836203016099" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">inet_listener pop3s {
    port = 0
    #port = 995
    #ssl = yes
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf836203016099-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf836203016099-2">2</div><div class="crayon-num" data-line="crayon-55266611cf836203016099-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf836203016099-4">4</div><div class="crayon-num" data-line="crayon-55266611cf836203016099-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf836203016099-1"><span class="crayon-e">inet_listener</span><span class="crayon-h"> </span><span class="crayon-e">pop3s</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf836203016099-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">port</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-55266611cf836203016099-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#port = 995</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf836203016099-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ssl = yes</span></div><div class="crayon-line" id="crayon-55266611cf836203016099-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf840242757832" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">unix_listener auth-userdb {
    mode = 0600
    user = vmail
    group = vmail
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf840242757832-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf840242757832-2">2</div><div class="crayon-num" data-line="crayon-55266611cf840242757832-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf840242757832-4">4</div><div class="crayon-num" data-line="crayon-55266611cf840242757832-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf840242757832-1"><span class="crayon-e">unix_listener</span><span class="crayon-h"> </span><span class="crayon-e">auth</span><span class="crayon-o">-</span><span class="crayon-e">userdb</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf840242757832-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0600</span></div><div class="crayon-line" id="crayon-55266611cf840242757832-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">user</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">vmail</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf840242757832-4"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">vmail</span></div><div class="crayon-line" id="crayon-55266611cf840242757832-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p>Define the desired authentication mechanisms in /etc/dovecot/conf.d/10-auth.conf, disable system-based authentication and enable LDAP-based authentication instead:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf84a064453735" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">auth_mechanisms = plain login
#!include auth-system.conf.ext
!include auth-ldap.conf.ext</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf84a064453735-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf84a064453735-2">2</div><div class="crayon-num" data-line="crayon-55266611cf84a064453735-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf84a064453735-1"><span class="crayon-v">auth_mechanisms</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">plain </span><span class="crayon-v">login</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf84a064453735-2"><span class="crayon-p">#!include auth-system.conf.ext</span></div><div class="crayon-line" id="crayon-55266611cf84a064453735-3"><span class="crayon-o">!</span><span class="crayon-e">include </span><span class="crayon-v">auth</span><span class="crayon-o">-</span><span class="crayon-v">ldap</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0015 seconds] -->
<p>Set the LDAP-related parameters in /etc/dovecot/dovecot-ldap.conf.ext:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf854059388134" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">hosts = 127.0.0.1
dn = uid=dovecot,ou=services,dc=example,dc=com
dnpass = secret
ldap_version = 3
base = ou=people,dc=example,dc=com
user_attrs = mailHomeDirectory=home,mailUidNumber=uid,mailGidNumber=gid,mailStorageDirectory=mail
user_filter = (&amp;(objectClass=PostfixBookMailAccount)(uniqueIdentifier=%n))
pass_attrs = uniqueIdentifier=user,userPassword=password
pass_filter = (&amp;(objectClass=PostfixBookMailAccount)(uniqueIdentifier=%n))
default_pass_scheme = CRYPT</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf854059388134-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf854059388134-2">2</div><div class="crayon-num" data-line="crayon-55266611cf854059388134-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf854059388134-4">4</div><div class="crayon-num" data-line="crayon-55266611cf854059388134-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf854059388134-6">6</div><div class="crayon-num" data-line="crayon-55266611cf854059388134-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf854059388134-8">8</div><div class="crayon-num" data-line="crayon-55266611cf854059388134-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf854059388134-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf854059388134-1"><span class="crayon-v">hosts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf854059388134-2"><span class="crayon-v">dn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">uid</span><span class="crayon-o">=</span><span class="crayon-v">dovecot</span><span class="crayon-sy">,</span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">services</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line" id="crayon-55266611cf854059388134-3"><span class="crayon-v">dnpass</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">secret</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf854059388134-4"><span class="crayon-v">ldap_version</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-55266611cf854059388134-5"><span class="crayon-v">base</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">people</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf854059388134-6"><span class="crayon-v">user_attrs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mailHomeDirectory</span><span class="crayon-o">=</span><span class="crayon-v">home</span><span class="crayon-sy">,</span><span class="crayon-v">mailUidNumber</span><span class="crayon-o">=</span><span class="crayon-v">uid</span><span class="crayon-sy">,</span><span class="crayon-v">mailGidNumber</span><span class="crayon-o">=</span><span class="crayon-v">gid</span><span class="crayon-sy">,</span><span class="crayon-v">mailStorageDirectory</span><span class="crayon-o">=</span><span class="crayon-e">mail</span></div><div class="crayon-line" id="crayon-55266611cf854059388134-7"><span class="crayon-v">user_filter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-sy">(</span><span class="crayon-v">objectClass</span><span class="crayon-o">=</span><span class="crayon-v">PostfixBookMailAccount</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">uniqueIdentifier</span><span class="crayon-o">=</span><span class="crayon-o">%</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf854059388134-8"><span class="crayon-v">pass_attrs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">uniqueIdentifier</span><span class="crayon-o">=</span><span class="crayon-v">user</span><span class="crayon-sy">,</span><span class="crayon-v">userPassword</span><span class="crayon-o">=</span><span class="crayon-e">password</span></div><div class="crayon-line" id="crayon-55266611cf854059388134-9"><span class="crayon-v">pass_filter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-sy">(</span><span class="crayon-v">objectClass</span><span class="crayon-o">=</span><span class="crayon-v">PostfixBookMailAccount</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">uniqueIdentifier</span><span class="crayon-o">=</span><span class="crayon-o">%</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf854059388134-10"><span class="crayon-v">default_pass_scheme</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">CRYPT</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0069 seconds] -->
<p>Activate logging in /etc/dovecot/conf.d/10-logging.conf:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf85e417511712" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">log_path = syslog
syslog_facility = mail
auth_debug = yes</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf85e417511712-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf85e417511712-2">2</div><div class="crayon-num" data-line="crayon-55266611cf85e417511712-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf85e417511712-1"><span class="crayon-v">log_path</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">syslog</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf85e417511712-2"><span class="crayon-v">syslog_facility</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">mail</span></div><div class="crayon-line" id="crayon-55266611cf85e417511712-3"><span class="crayon-v">auth_debug</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">yes</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0015 seconds] -->
<p>Set the path to your certificates in /etc/dovecot/conf.d/10-ssl.conf:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf868770586305" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">ssl_cert = &lt;/etc/dovecot/mail_public_cert.pem
ssl_key = &lt;/etc/dovecot/private/mail_private_key.pem</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf868770586305-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf868770586305-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf868770586305-1"><span class="crayon-v">ssl_cert</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dovecot</span><span class="crayon-o">/</span><span class="crayon-v">mail_public_cert</span><span class="crayon-sy">.</span><span class="crayon-e">pem</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf868770586305-2"><span class="crayon-v">ssl_key</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dovecot</span><span class="crayon-o">/</span><span class="crayon-m">private</span><span class="crayon-o">/</span><span class="crayon-v">mail_private_key</span><span class="crayon-sy">.</span><span class="crayon-v">pem</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0022 seconds] -->
<p>Add a system user and group named vmail with uid and gid 5000:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf872803555007" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">addgroup --system --gid 5000 vmail
adduser --system --home /srv/vmail --uid 5000 --gid 5000 --disabled-password --disabled-login vmail</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf872803555007-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf872803555007-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf872803555007-1"><span class="crayon-v">addgroup</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">system</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">gid</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span><span class="crayon-h"> </span><span class="crayon-e">vmail</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf872803555007-2"><span class="crayon-v">adduser</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">system</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">home</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">srv</span><span class="crayon-o">/</span><span class="crayon-v">vmail</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">uid</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">gid</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">disabled</span><span class="crayon-o">-</span><span class="crayon-v">password</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">disabled</span><span class="crayon-o">-</span><span class="crayon-e">login </span><span class="crayon-v">vmail</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0032 seconds] -->
<p>Make sure that /srv/vmail has been created.</p>
<h4>4. Starting Dovecot</h4>
<p>Start Dovecot with&nbsp;
			<span id="crayon-55266611cf87c147016262" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">service </span><span class="crayon-e">dovecot </span><span class="crayon-v">start</span></span></span>&nbsp;and check if it is running with&nbsp;
			<span id="crayon-55266611cf885878033951" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">lsof</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">Pni</span></span></span>&nbsp;— port 110 and 143 should be open. If it isn’t running, check the logfiles (mail.log and syslog). If there are no errors in the log, start Dovecot in foreground mode to have the errors printed to the console:&nbsp;
			<span id="crayon-55266611cf88f007783501" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">dovecot</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">F</span></span></span>.</p>
<h4>5. IMAP&nbsp;Connection &amp; Authentication Test</h4>
<p>Use Telnet to connect to Dovecot’s IMAP Server: 
			<span id="crayon-55266611cf899380245289" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-i">telnet</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span><span class="crayon-h"> </span><span class="crayon-cn">143</span></span></span>. Then send a login request (
			<span id="crayon-55266611cf8a3143744103" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">login </span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com </span><span class="crayon-v">secret</span></span></span>) to see if authentication (plain) is working:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8ad220695705" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
* OK [CAPABILITY IMAP4rev1 LITERAL+ SASL-IR LOGIN-REFERRALS ID ENABLE IDLE STARTTLS AUTH=PLAIN AUTH=LOGIN] Dovecot (Ubuntu) ready.
1 login alice@example.com secret
1 OK [CAPABILITY IMAP4rev1 LITERAL+ SASL-IR LOGIN-REFERRALS ID ENABLE IDLE SORT SORT=DISPLAY THREAD=REFERENCES THREAD=REFS THREAD=ORDEREDSUBJECT MULTIAPPEND URL-PARTIAL CATENATE UNSELECT CHILDREN NAMESPACE UIDPLUS LIST-EXTENDED I18NLEVEL=1 CONDSTORE QRESYNC ESEARCH ESORT SEARCHRES WITHIN CONTEXT=SEARCH LIST-STATUS SPECIAL-USE BINARY MOVE] Logged in
2 logout
* BYE Logging out</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8ad220695705-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8ad220695705-2">2</div><div class="crayon-num" data-line="crayon-55266611cf8ad220695705-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8ad220695705-4">4</div><div class="crayon-num" data-line="crayon-55266611cf8ad220695705-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8ad220695705-6">6</div><div class="crayon-num" data-line="crayon-55266611cf8ad220695705-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8ad220695705-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8ad220695705-1"><span class="crayon-i">Trying</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1...</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8ad220695705-2"><span class="crayon-e">Connected </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">localhost</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-55266611cf8ad220695705-3"><span class="crayon-e">Escape </span><span class="crayon-e">character </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-s">'^]'</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8ad220695705-4"><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-i">OK</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">CAPABILITY </span><span class="crayon-e">IMAP4rev1 </span><span class="crayon-v">LITERAL</span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">SASL</span><span class="crayon-o">-</span><span class="crayon-e">IR </span><span class="crayon-v">LOGIN</span><span class="crayon-o">-</span><span class="crayon-e">REFERRALS </span><span class="crayon-e">ID </span><span class="crayon-e">ENABLE </span><span class="crayon-e">IDLE </span><span class="crayon-e">STARTTLS </span><span class="crayon-v">AUTH</span><span class="crayon-o">=</span><span class="crayon-e">PLAIN </span><span class="crayon-v">AUTH</span><span class="crayon-o">=</span><span class="crayon-v">LOGIN</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">Dovecot</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Ubuntu</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">ready</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-55266611cf8ad220695705-5"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">login </span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com </span><span class="crayon-i">secret</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8ad220695705-6"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-i">OK</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">CAPABILITY </span><span class="crayon-e">IMAP4rev1 </span><span class="crayon-v">LITERAL</span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">SASL</span><span class="crayon-o">-</span><span class="crayon-e">IR </span><span class="crayon-v">LOGIN</span><span class="crayon-o">-</span><span class="crayon-e">REFERRALS </span><span class="crayon-e">ID </span><span class="crayon-e">ENABLE </span><span class="crayon-e">IDLE </span><span class="crayon-e">SORT </span><span class="crayon-v">SORT</span><span class="crayon-o">=</span><span class="crayon-e">DISPLAY </span><span class="crayon-v">THREAD</span><span class="crayon-o">=</span><span class="crayon-e">REFERENCES </span><span class="crayon-v">THREAD</span><span class="crayon-o">=</span><span class="crayon-e">REFS </span><span class="crayon-v">THREAD</span><span class="crayon-o">=</span><span class="crayon-e">ORDEREDSUBJECT </span><span class="crayon-e">MULTIAPPEND </span><span class="crayon-v">URL</span><span class="crayon-o">-</span><span class="crayon-e">PARTIAL </span><span class="crayon-e">CATENATE </span><span class="crayon-e">UNSELECT </span><span class="crayon-e">CHILDREN </span><span class="crayon-t">NAMESPACE</span><span class="crayon-h"> </span><span class="crayon-e">UIDPLUS </span><span class="crayon-v">LIST</span><span class="crayon-o">-</span><span class="crayon-e">EXTENDED </span><span class="crayon-v">I18NLEVEL</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">CONDSTORE </span><span class="crayon-e">QRESYNC </span><span class="crayon-e">ESEARCH </span><span class="crayon-e">ESORT </span><span class="crayon-e">SEARCHRES </span><span class="crayon-e">WITHIN </span><span class="crayon-v">CONTEXT</span><span class="crayon-o">=</span><span class="crayon-e">SEARCH </span><span class="crayon-v">LIST</span><span class="crayon-o">-</span><span class="crayon-e">STATUS </span><span class="crayon-v">SPECIAL</span><span class="crayon-o">-</span><span class="crayon-st">USE</span><span class="crayon-h"> </span><span class="crayon-e">BINARY </span><span class="crayon-v">MOVE</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">Logged </span><span class="crayon-st">in</span></div><div class="crayon-line" id="crayon-55266611cf8ad220695705-7"><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e ">logout</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8ad220695705-8"><span class="crayon-e ">*</span><span class="crayon-h"> </span><span class="crayon-e">BYE </span><span class="crayon-e">Logging </span><span class="crayon-v">out</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0318 seconds] -->
<p></p>
<h4>6. Postfix Integration</h4>
<p>Activate Dovecot Deliver in Postfix by adding these lines to /etc/postfix/master.cf:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8b8411603755" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">dovecot   unix  -       n       n       -       -       pipe
        flags=ODRhu user=vmail:vmail argv=/usr/lib/dovecot/deliver -e -f ${sender} -d ${recipient}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8b8411603755-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8b8411603755-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8b8411603755-1"><span class="crayon-e">dovecot&nbsp;&nbsp; </span><span class="crayon-v">unix</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">-</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">n</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">n</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-o">-</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-o">-</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">pipe</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8b8411603755-2"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">flags</span><span class="crayon-o">=</span><span class="crayon-e">ODRhu </span><span class="crayon-v">user</span><span class="crayon-o">=</span><span class="crayon-v">vmail</span><span class="crayon-o">:</span><span class="crayon-e">vmail </span><span class="crayon-v">argv</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-e">usr</span><span class="crayon-o">/</span><span class="crayon-e">lib</span><span class="crayon-o">/</span><span class="crayon-e">dovecot</span><span class="crayon-o">/</span><span class="crayon-e">deliver</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">e</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">f</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">sender</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">d</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">recipient</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0034 seconds] -->
<p>Set the postmaster address in /etc/dovecot/conf.d/15-lda.conf:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8c2934628647" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">postmaster_address = postmaster@example.com</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8c2934628647-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8c2934628647-1"><span class="crayon-v">postmaster_address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">postmaster</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>Restart Dovecot and Postfix:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8cc038642208" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">service dovecot restart
service postfix restart</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8cc038642208-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8cc038642208-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8cc038642208-1"><span class="crayon-e">service </span><span class="crayon-e">dovecot </span><span class="crayon-e">restart</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8cc038642208-2"><span class="crayon-e">service </span><span class="crayon-e">postfix </span><span class="crayon-v">restart</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<h4>7. Dovecot Deliver Test</h4>
<p>Send a testmail to alice@example.com using one of the following&nbsp;methods:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8d5023816205" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">echo Testmail | sendmail -f bob@example.com alice@example.com</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8d5023816205-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8d5023816205-1"><span class="crayon-r">echo</span><span class="crayon-h"> </span><span class="crayon-v">Testmail</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">sendmail</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">f</span><span class="crayon-h"> </span><span class="crayon-v">bob</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8df092017438" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">swaks --from bob@example.com --to alice@example.com --server 127.0.0.1:25</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8df092017438-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8df092017438-1"><span class="crayon-v">swaks</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">from </span><span class="crayon-v">bob</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">server</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span><span class="crayon-o">:</span><span class="crayon-cn">25</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0020 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8e8805173935" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">telnet 127.0.0.1 25

Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 mail.example.com ESMTP Postfix (Ubuntu)
EHLO test.local
250-mail.example.com
250-PIPELINING
250-SIZE 10240000
250-ETRN
250-AUTH DIGEST-MD5 NTLM CRAM-MD5 LOGIN PLAIN
250-AUTH=DIGEST-MD5 NTLM CRAM-MD5 LOGIN PLAIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN
MAIL FROM:&lt;bob@example.com&gt;
250 2.1.0 Ok
RCPT TO:&lt;alice@example.com&gt;
250 2.1.5 Ok
DATA
354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;
Testmail
.
250 2.0.0 Ok: queued as 51586A1146
QUIT
221 2.0.0 Bye</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-2">2</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-4">4</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-6">6</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-8">8</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-10">10</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-12">12</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-14">14</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-16">16</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-18">18</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-20">20</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-22">22</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-24">24</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf8e8805173935-26">26</div><div class="crayon-num" data-line="crayon-55266611cf8e8805173935-27">27</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8e8805173935-1"><span class="crayon-i">telnet</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span><span class="crayon-h"> </span><span class="crayon-cn">25</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-2">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf8e8805173935-3"><span class="crayon-i">Trying</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1...</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-4"><span class="crayon-e">Connected </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">localhost</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-5"><span class="crayon-e">Escape </span><span class="crayon-e">character </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-s">'^]'</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-6"><span class="crayon-cn">220</span><span class="crayon-h"> </span><span class="crayon-v">mail</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com </span><span class="crayon-e">ESMTP </span><span class="crayon-e">Postfix</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Ubuntu</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-7"><span class="crayon-e">EHLO </span><span class="crayon-v">test</span><span class="crayon-sy">.</span><span class="crayon-i">local</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-8"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-v">mail</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-i">com</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-9"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">PIPELINING</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-10"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">SIZE</span><span class="crayon-h"> </span><span class="crayon-cn">10240000</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-11"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">ETRN</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-12"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-e">AUTH </span><span class="crayon-v">DIGEST</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">NTLM </span><span class="crayon-v">CRAM</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">LOGIN </span><span class="crayon-i">PLAIN</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-13"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-v">AUTH</span><span class="crayon-o">=</span><span class="crayon-v">DIGEST</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">NTLM </span><span class="crayon-v">CRAM</span><span class="crayon-o">-</span><span class="crayon-e">MD5 </span><span class="crayon-e">LOGIN </span><span class="crayon-i">PLAIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-14"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">ENHANCEDSTATUSCODES</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-15"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-cn">8BITMIME</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-16"><span class="crayon-cn">250</span><span class="crayon-h"> </span><span class="crayon-e">DSN</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-17"><span class="crayon-e">MAIL </span><span class="crayon-v">FROM</span><span class="crayon-o">:</span><span class="crayon-o">&lt;</span><span class="crayon-v">bob</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-18"><span class="crayon-cn">250</span><span class="crayon-h"> </span><span class="crayon-cn">2.1.0</span><span class="crayon-h"> </span><span class="crayon-e">Ok</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-19"><span class="crayon-e">RCPT </span><span class="crayon-st">TO</span><span class="crayon-o">:</span><span class="crayon-o">&lt;</span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-20"><span class="crayon-cn">250</span><span class="crayon-h"> </span><span class="crayon-cn">2.1.5</span><span class="crayon-h"> </span><span class="crayon-e">Ok</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-21"><span class="crayon-i">DATA</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-22"><span class="crayon-cn">354</span><span class="crayon-h"> </span><span class="crayon-st">End</span><span class="crayon-h"> </span><span class="crayon-e">data </span><span class="crayon-v">with</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">CR</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">LF</span><span class="crayon-o">&gt;</span><span class="crayon-sy">.</span><span class="crayon-o">&lt;</span><span class="crayon-v">CR</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">LF</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-23"><span class="crayon-i">Testmail</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-24"><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-25"><span class="crayon-cn">250</span><span class="crayon-h"> </span><span class="crayon-cn">2.0.0</span><span class="crayon-h"> </span><span class="crayon-v">Ok</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">queued </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-cn">51586A1146</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf8e8805173935-26"><span class="crayon-i">QUIT</span></div><div class="crayon-line" id="crayon-55266611cf8e8805173935-27"><span class="crayon-cn">221</span><span class="crayon-h"> </span><span class="crayon-cn">2.0.0</span><span class="crayon-h"> </span><span class="crayon-v">Bye</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0094 seconds] -->
<p>Check the log (/var/log/mail.log) and Alice’s mailbox:&nbsp;
			<span id="crayon-55266611cf8f3043462266" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">f</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">srv</span><span class="crayon-o">/</span><span class="crayon-v">vmail</span><span class="crayon-o">/</span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-o">/</span><span class="crayon-v">Maildir</span><span class="crayon-o">/</span></span></span></p>
<p>&nbsp;</p>
<h2>SASL (Cyrus)</h2>
<h4>1. Installation</h4>
<p></p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf8fd115435864" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">apt-get install libsasl2-2 sasl2-bin</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf8fd115435864-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf8fd115435864-1"><span class="crayon-v">apt</span><span class="crayon-o">-</span><span class="crayon-r">get</span><span class="crayon-h"> </span><span class="crayon-e">install </span><span class="crayon-v">libsasl2</span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-v">sasl2</span><span class="crayon-o">-</span><span class="crayon-v">bin</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p></p>
<h4>2. Configuration</h4>
<p>Create an “smtpd.conf” in /etc/postfix/sasl/ with the following content:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf90e724101351" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">log_level: 3
pwcheck_method: saslauthd
mech_list: PLAIN LOGIN</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf90e724101351-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf90e724101351-2">2</div><div class="crayon-num" data-line="crayon-55266611cf90e724101351-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf90e724101351-1"><span class="crayon-v">log_level</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf90e724101351-2"><span class="crayon-v">pwcheck_method</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">saslauthd</span></div><div class="crayon-line" id="crayon-55266611cf90e724101351-3"><span class="crayon-v">mech_list</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">PLAIN </span><span class="crayon-v">LOGIN</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p>Enable autostart, set the mechanism to LDAP and set the options for a chrooted Postfix in /etc/default/saslauthd:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf917021236270" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">START=yes
MECHANISMS="ldap"
OPTIONS="-c -m /var/spool/postfix/var/run/saslauthd"</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf917021236270-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf917021236270-2">2</div><div class="crayon-num" data-line="crayon-55266611cf917021236270-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf917021236270-1"><span class="crayon-v">START</span><span class="crayon-o">=</span><span class="crayon-e">yes</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf917021236270-2"><span class="crayon-v">MECHANISMS</span><span class="crayon-o">=</span><span class="crayon-s">"ldap"</span></div><div class="crayon-line" id="crayon-55266611cf917021236270-3"><span class="crayon-v">OPTIONS</span><span class="crayon-o">=</span><span class="crayon-s">"-c -m /var/spool/postfix/var/run/saslauthd"</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>Create the LDAP configuration for SASL in /etc/saslauthd.conf:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf921457673505" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">ldap_servers: ldap://127.0.0.1/
ldap_bind_dn: uid=saslauthd,ou=services,dc=example,dc=com
ldap_bind_pw: secret
ldap_timeout: 10
ldap_time_limit: 10
ldap_scope: sub
ldap_search_base: ou=people,dc=example,dc=com
ldap_auth_method: bind
ldap_filter: (&amp;(uniqueIdentifier=%u)(mailEnabled=TRUE))
ldap_debug: 0
ldap_verbose: off
ldap_ssl: no
ldap_starttls: no
ldap_referrals: yes</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf921457673505-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf921457673505-2">2</div><div class="crayon-num" data-line="crayon-55266611cf921457673505-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf921457673505-4">4</div><div class="crayon-num" data-line="crayon-55266611cf921457673505-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf921457673505-6">6</div><div class="crayon-num" data-line="crayon-55266611cf921457673505-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf921457673505-8">8</div><div class="crayon-num" data-line="crayon-55266611cf921457673505-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf921457673505-10">10</div><div class="crayon-num" data-line="crayon-55266611cf921457673505-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf921457673505-12">12</div><div class="crayon-num" data-line="crayon-55266611cf921457673505-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf921457673505-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf921457673505-1"><span class="crayon-v">ldap_servers</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ldap</span><span class="crayon-o">:</span><span class="crayon-c">//127.0.0.1/</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf921457673505-2"><span class="crayon-v">ldap_bind_dn</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">uid</span><span class="crayon-o">=</span><span class="crayon-v">saslauthd</span><span class="crayon-sy">,</span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">services</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line" id="crayon-55266611cf921457673505-3"><span class="crayon-v">ldap_bind_pw</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">secret</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf921457673505-4"><span class="crayon-v">ldap_timeout</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span></div><div class="crayon-line" id="crayon-55266611cf921457673505-5"><span class="crayon-v">ldap_time_limit</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf921457673505-6"><span class="crayon-v">ldap_scope</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">sub</span></div><div class="crayon-line" id="crayon-55266611cf921457673505-7"><span class="crayon-v">ldap_search_base</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ou</span><span class="crayon-o">=</span><span class="crayon-v">people</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-v">example</span><span class="crayon-sy">,</span><span class="crayon-v">dc</span><span class="crayon-o">=</span><span class="crayon-e">com</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf921457673505-8"><span class="crayon-v">ldap_auth_method</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">bind</span></div><div class="crayon-line" id="crayon-55266611cf921457673505-9"><span class="crayon-v">ldap_filter</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-sy">(</span><span class="crayon-v">uniqueIdentifier</span><span class="crayon-o">=</span><span class="crayon-o">%</span><span class="crayon-v">u</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">mailEnabled</span><span class="crayon-o">=</span><span class="crayon-t">TRUE</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf921457673505-10"><span class="crayon-v">ldap_debug</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-55266611cf921457673505-11"><span class="crayon-v">ldap_verbose</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">off</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf921457673505-12"><span class="crayon-v">ldap_ssl</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no</span></div><div class="crayon-line" id="crayon-55266611cf921457673505-13"><span class="crayon-v">ldap_starttls</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf921457673505-14"><span class="crayon-v">ldap_referrals</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">yes</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0058 seconds] -->
<p>Set permissions for the config file:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf92b096959967" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">chown root:sasl /etc/saslauthd.conf
chmod 640 /etc/saslauthd.conf</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf92b096959967-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf92b096959967-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf92b096959967-1"><span class="crayon-e">chown </span><span class="crayon-v">root</span><span class="crayon-o">:</span><span class="crayon-v">sasl</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">saslauthd</span><span class="crayon-sy">.</span><span class="crayon-e">conf</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf92b096959967-2"><span class="crayon-i">chmod</span><span class="crayon-h"> </span><span class="crayon-cn">640</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">saslauthd</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->
<p>Add the postfix user to the sasl group:&nbsp;
			<span id="crayon-55266611cf935111816193" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">adduser </span><span class="crayon-e">postfix </span><span class="crayon-v">sasl</span></span></span></p>
<p>And start the daemon:&nbsp;
			<span id="crayon-55266611cf93f056300625" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">service </span><span class="crayon-e">saslauthd </span><span class="crayon-v">start</span></span></span></p>
<h4>3. SASL Authentication Test</h4>
<p>Use the following command to test if SASL is working:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf949707592161" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">testsaslauthd -u alice -p secret -f /var/spool/postfix/var/run/saslauthd/mux</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf949707592161-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf949707592161-1"><span class="crayon-v">testsaslauthd</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">u</span><span class="crayon-h"> </span><span class="crayon-v">alice</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-v">secret</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">f</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">spool</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">run</span><span class="crayon-o">/</span><span class="crayon-v">saslauthd</span><span class="crayon-o">/</span><span class="crayon-v">mux</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->
<p>It should return&nbsp;0: OK “Success.”</p>
<h4>4. SMTP Authentication Test</h4>
<p>To test if SASL works with SMTP, we first need the username and password in Base64 format. Use this command to convert it (@ needs to be escaped with a backslash):</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf953871580850" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Perl</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">perl -MMIME::Base64 -e 'print encode_base64("alice\@example.com");'
perl -MMIME::Base64 -e 'print encode_base64("secret");'</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf953871580850-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf953871580850-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf953871580850-1"><span class="crayon-cn">perl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">MMIME::</span><span class="crayon-cn">Base64</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">e</span><span class="crayon-h"> </span><span class="crayon-s">'print encode_base64("alice\@example.com");'</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf953871580850-2"><span class="crayon-cn">perl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">MMIME::</span><span class="crayon-cn">Base64</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">e</span><span class="crayon-h"> </span><span class="crayon-s">'print encode_base64("secret");'</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0022 seconds] -->
<p>Open up a Telnet session, send an 
			<span id="crayon-55266611cf95d291511559" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">EHLO </span><span class="crayon-v">test</span><span class="crayon-sy">.</span><span class="crayon-v">local</span></span></span>, followed by an 
			<span id="crayon-55266611cf967491929869" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">AUTH </span><span class="crayon-v">LOGIN</span></span></span>. The server will ask for the username by sending “334 VXNlcm5hbWU6″. Just paste your encoded username now. Then the server will ask for the password (“334 UGFzc3dvcmQ6″):</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf971304619286" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">telnet localhost 25

Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 mail.example.com ESMTP Postfix (Ubuntu)
EHLO test.local
250-mail.example.com
250-PIPELINING
250-SIZE 10240000
250-ETRN
250-STARTTLS
250-AUTH PLAIN LOGIN
250-AUTH=PLAIN LOGIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN
AUTH LOGIN
334 VXNlcm5hbWU6
YWxpY2VAZXhhbXBsZS5jb20=
334 UGFzc3dvcmQ6
c2VjcmV0
235 2.7.0 Authentication successful
QUIT       
221 2.0.0 Bye</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf971304619286-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-2">2</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-4">4</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-6">6</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-8">8</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-10">10</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-12">12</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-14">14</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-16">16</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-18">18</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-20">20</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-22">22</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf971304619286-24">24</div><div class="crayon-num" data-line="crayon-55266611cf971304619286-25">25</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf971304619286-1"><span class="crayon-e">telnet </span><span class="crayon-i">localhost</span><span class="crayon-h"> </span><span class="crayon-cn">25</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-2">&nbsp;</div><div class="crayon-line" id="crayon-55266611cf971304619286-3"><span class="crayon-i">Trying</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1...</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-4"><span class="crayon-e">Connected </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">localhost</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-5"><span class="crayon-e">Escape </span><span class="crayon-e">character </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-s">'^]'</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-6"><span class="crayon-cn">220</span><span class="crayon-h"> </span><span class="crayon-v">mail</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-e">com </span><span class="crayon-e">ESMTP </span><span class="crayon-e">Postfix</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Ubuntu</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-7"><span class="crayon-e">EHLO </span><span class="crayon-v">test</span><span class="crayon-sy">.</span><span class="crayon-i">local</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-8"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-v">mail</span><span class="crayon-sy">.</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-i">com</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-9"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">PIPELINING</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-10"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">SIZE</span><span class="crayon-h"> </span><span class="crayon-cn">10240000</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-11"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">ETRN</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-12"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">STARTTLS</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-13"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-e">AUTH </span><span class="crayon-e">PLAIN </span><span class="crayon-i">LOGIN</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-14"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-v">AUTH</span><span class="crayon-o">=</span><span class="crayon-e">PLAIN </span><span class="crayon-i">LOGIN</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-15"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-i">ENHANCEDSTATUSCODES</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-16"><span class="crayon-cn">250</span><span class="crayon-o">-</span><span class="crayon-cn">8BITMIME</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-17"><span class="crayon-cn">250</span><span class="crayon-h"> </span><span class="crayon-e">DSN</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-18"><span class="crayon-e">AUTH </span><span class="crayon-i">LOGIN</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-19"><span class="crayon-cn">334</span><span class="crayon-h"> </span><span class="crayon-e">VXNlcm5hbWU6</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-20"><span class="crayon-v">YWxpY2VAZXhhbXBsZS5jb20</span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-21"><span class="crayon-cn">334</span><span class="crayon-h"> </span><span class="crayon-e">UGFzc3dvcmQ6</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-22"><span class="crayon-i">c2VjcmV0</span></div><div class="crayon-line" id="crayon-55266611cf971304619286-23"><span class="crayon-cn">235</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.0</span><span class="crayon-h"> </span><span class="crayon-e">Authentication </span><span class="crayon-e">successful</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf971304619286-24"><span class="crayon-i">QUIT</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></div><div class="crayon-line" id="crayon-55266611cf971304619286-25"><span class="crayon-cn">221</span><span class="crayon-h"> </span><span class="crayon-cn">2.0.0</span><span class="crayon-h"> </span><span class="crayon-v">Bye</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0065 seconds] -->
<p>If everything went well, the server should return 235 2.7.0 Authentication successful. If it did not work, check /var/log/auth.log for any errors. If that file doesn’t help, activate extended logging in the SMTP server&nbsp;by adding a “-v” to the smtpd command in master.cf:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf97b549883900" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">smtp      inet  n       -       -       -       -       smtpd -v</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf97b549883900-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf97b549883900-1"><span class="crayon-e">smtp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">inet</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">n</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-o">-</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-o">-</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-o">-</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-o">-</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">smtpd</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">v</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p>
<h4>5.&nbsp;Comfortably Send Test Mails (with Authentication)</h4>
<p></p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf985808032607" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">swaks --from alice@example.com --to bob@example.com --server 127.0.0.1:25 --auth plain --auth-user=alice@example.com</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf985808032607-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf985808032607-1"><span class="crayon-v">swaks</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">from </span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">bob</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">server</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span><span class="crayon-o">:</span><span class="crayon-cn">25</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">auth </span><span class="crayon-v">plain</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">auth</span><span class="crayon-o">-</span><span class="crayon-v">user</span><span class="crayon-o">=</span><span class="crayon-v">alice</span><span class="crayon-sy">@</span><span class="crayon-v">example</span><span class="crayon-e">.com</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0027 seconds] -->
<p>&nbsp;</p>
<h2>TLS (Postfix)</h2>
<p>With the current configuration, the mail server only offers plaintext (and login) authentication. This is good, because all clients support this and the passwords can be stored encrypted in the LDAP. Other authentication methods would require storing the passwords in plaintext. To make the authentication process secure (and not have the passwords trasferred in plaintext) the session needs to be encrypted — this is done with TLS.</p>
<h4>1. Certificate Files &amp; Permissions</h4>
<p>Save your certificate and key files in /etc/postfix/certs (see main.cf for filenames). Also save the Diffie-Hellman files (for perfect forward secrecy) in this folder. These can be created as follows:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf990327977510" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">openssl dhparam -2 -out dh_512.pem 512
openssl dhparam -2 -out dh_1024.pem 1024</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf990327977510-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf990327977510-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf990327977510-1"><span class="crayon-e">openssl </span><span class="crayon-v">dhparam</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">out </span><span class="crayon-v">dh_512</span><span class="crayon-e">.pem</span><span class="crayon-h"> </span><span class="crayon-cn">512</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf990327977510-2"><span class="crayon-e">openssl </span><span class="crayon-v">dhparam</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">out </span><span class="crayon-v">dh_1024</span><span class="crayon-e">.pem</span><span class="crayon-h"> </span><span class="crayon-cn">1024</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p>Set the permissions to:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf99a938868272" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">chown -R root:root /etc/postfix/certs/
chmod -R 600 /etc/postfix/certs/</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf99a938868272-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf99a938868272-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf99a938868272-1"><span class="crayon-r">chown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">R</span><span class="crayon-h"> </span><span class="crayon-v">root</span><span class="crayon-o">:</span><span class="crayon-v">root</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">certs</span><span class="crayon-o">/</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf99a938868272-2"><span class="crayon-r">chmod</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">R</span><span class="crayon-h"> </span><span class="crayon-cn">600</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">postfix</span><span class="crayon-o">/</span><span class="crayon-v">certs</span><span class="crayon-o">/</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->
<p></p>
<h4>2. Activate TLS</h4>
<p>In main.cf uncomment the six parameters that have been commented out in step 2 of the Postfix chapter, restart Postfix and check the log for any errors. If everything went well, the server should&nbsp;no longer offer AUTH PLAIN LOGIN, but STARTTLS instead. You can check this by looking at the EHLO response (see step 5 of the Postfix chapter).</p>
<h4>3. TLS Test</h4>
<p>With the following command you can connect to the server using STARTTLS:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9a4465794725" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">openssl s_client -CAfile certs/example-cacert.pem -starttls smtp -connect localhost:25</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9a4465794725-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9a4465794725-1"><span class="crayon-e">openssl </span><span class="crayon-v">s_client</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">CAfile </span><span class="crayon-v">certs</span><span class="crayon-o">/</span><span class="crayon-v">example</span><span class="crayon-o">-</span><span class="crayon-v">cacert</span><span class="crayon-e">.pem</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">starttls </span><span class="crayon-v">smtp</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">connect </span><span class="crayon-v">localhost</span><span class="crayon-o">:</span><span class="crayon-cn">25</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0019 seconds] -->
<p>Then you can talk to the server like in a Telnet session, but do not type a capital “R” since this will trigger a Renegotiation. If you want to send a mail, use “rcpt to:” instead of “RCPT TO:”.</p>
<p>This also works from external hosts (just change the -connect value to your mail server name). The -CAfile parameter is optional and can be omitted for a quick test.</p>
<p>&nbsp;</p>
<h2>Roundcube</h2>
<h4>1. Installation</h4>
<p>Download the Roundcube archive (v1.0.1 at this time) from&nbsp;<a href="http://roundcube.net/download/" target="_blank">http://roundcube.net/download/</a>&nbsp;and extract it to your webroot (/var/www/html on Ubuntu 14.04, /var/www on previous versions). See the INSTALL file for installation instructions. These are the essential steps:</p>
<p>Install the necessary software:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9af197584842" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">apt-get install apache2 php5 mysql-server php5-mysql php5-mcrypt php5-intl php-pear php5-ldap</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9af197584842-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9af197584842-1"><span class="crayon-v">apt</span><span class="crayon-o">-</span><span class="crayon-r">get</span><span class="crayon-h"> </span><span class="crayon-e">install </span><span class="crayon-e">apache2 </span><span class="crayon-e">php5 </span><span class="crayon-v">mysql</span><span class="crayon-o">-</span><span class="crayon-e">server </span><span class="crayon-v">php5</span><span class="crayon-o">-</span><span class="crayon-e">mysql </span><span class="crayon-v">php5</span><span class="crayon-o">-</span><span class="crayon-e">mcrypt </span><span class="crayon-v">php5</span><span class="crayon-o">-</span><span class="crayon-e">intl </span><span class="crayon-v">php</span><span class="crayon-o">-</span><span class="crayon-e">pear </span><span class="crayon-v">php5</span><span class="crayon-o">-</span><span class="crayon-v">ldap</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p>Set permissions of the webdir:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9b9808479691" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">cd /var/www/html
chown -R root:www-data roundcube
chmod -R 750 roundcube
chmod -R 720 roundcube/temp roundcube/logs</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9b9808479691-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf9b9808479691-2">2</div><div class="crayon-num" data-line="crayon-55266611cf9b9808479691-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf9b9808479691-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9b9808479691-1"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">www</span><span class="crayon-o">/</span><span class="crayon-e">html</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf9b9808479691-2"><span class="crayon-r">chown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">R</span><span class="crayon-h"> </span><span class="crayon-v">root</span><span class="crayon-o">:</span><span class="crayon-v">www</span><span class="crayon-o">-</span><span class="crayon-e">data </span><span class="crayon-e">roundcube</span></div><div class="crayon-line" id="crayon-55266611cf9b9808479691-3"><span class="crayon-r">chmod</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">R</span><span class="crayon-h"> </span><span class="crayon-cn">750</span><span class="crayon-h"> </span><span class="crayon-e">roundcube</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf9b9808479691-4"><span class="crayon-r">chmod</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">R</span><span class="crayon-h"> </span><span class="crayon-cn">720</span><span class="crayon-h"> </span><span class="crayon-v">roundcube</span><span class="crayon-o">/</span><span class="crayon-e">temp </span><span class="crayon-v">roundcube</span><span class="crayon-o">/</span><span class="crayon-v">logs</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0030 seconds] -->
<p>Configure your timezone in /etc/php5/apache2/php.ini:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9c7324038459" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">date.timezone = Europe/Berlin</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9c7324038459-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9c7324038459-1"><span class="crayon-v">date</span><span class="crayon-sy">.</span><span class="crayon-v">timezone</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Europe</span><span class="crayon-o">/</span><span class="crayon-v">Berlin</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>Activate mcrypt:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9d1657435301" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">php5enmod mcrypt
service apache2 restart</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9d1657435301-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf9d1657435301-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9d1657435301-1"><span class="crayon-e">php5enmod </span><span class="crayon-e">mcrypt</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf9d1657435301-2"><span class="crayon-e">service </span><span class="crayon-e">apache2 </span><span class="crayon-v">restart</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<h4>2. Database Setup</h4>
<p>Connect to the database:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9db638955192" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">mysql -u root -p</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9db638955192-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9db638955192-1"><span class="crayon-v">mysql</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">u</span><span class="crayon-h"> </span><span class="crayon-v">root</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>Create a database for Roundcube:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9e4537405981" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">MySQL</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">CREATE DATABASE roundcubemail CHARACTER SET utf8 COLLATE utf8_general_ci;
GRANT ALL PRIVILEGES ON roundcubemail.* TO roundcube@localhost IDENTIFIED BY 'password';
QUIT;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9e4537405981-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf9e4537405981-2">2</div><div class="crayon-num" data-line="crayon-55266611cf9e4537405981-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9e4537405981-1"><span class="crayon-st">CREATE</span><span class="crayon-h"> </span><span class="crayon-st">DATABASE</span><span class="crayon-h"> </span>roundcubemail<span class="crayon-h"> </span><span class="crayon-st">CHARACTER SET</span><span class="crayon-h"> </span>utf8<span class="crayon-h"> </span><span class="crayon-st">COLLATE</span><span class="crayon-h"> </span>utf8_general_ci;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf9e4537405981-2"><span class="crayon-st">GRANT</span><span class="crayon-h"> </span><span class="crayon-st">ALL</span><span class="crayon-h"> </span><span class="crayon-st">PRIVILEGES</span><span class="crayon-h"> </span><span class="crayon-st">ON</span><span class="crayon-h"> </span>roundcubemail.*<span class="crayon-h"> </span><span class="crayon-st">TO</span><span class="crayon-h"> </span>roundcube@localhost<span class="crayon-h"> </span><span class="crayon-st">IDENTIFIED BY</span><span class="crayon-h"> </span><span class="crayon-s">'password'</span>;</div><div class="crayon-line" id="crayon-55266611cf9e4537405981-3">QUIT;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0046 seconds] -->
<p></p>
<h4>3. Config File Creation</h4>
<p>Open Firefox and go to <a href="http://127.0.0.1/roundcube/installer" target="_blank">http://127.0.0.1/roundcube/installer</a>&nbsp;to start the Roundcube installer, which will perform some system checks, initialize the database and create a config file for you. Two notes:</p>
<ul>
<li>Set tls://localhost as smtp_server</li>
<li>Check “Use the current IMAP username and password for SMTP authentication”</li>
</ul>
<p>Save the generated config file to /var/www/html/roundcube/config/config.inc.php and set the permissions like above. You might have to call the installer again to get the “Initialize Database” option.</p>
<p>Delete (or chmod -R 000) the installer directory.</p>
<p>Add the Override option for the Roundcube directory in&nbsp;/etc/apache2/sites-enabled/000-default.conf so that its .htaccess file will be loaded (this will also deactivate Indexes):</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9ef786662945" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Apache</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">&lt;Directory /var/www/html/roundcube&gt;
        AllowOverride All
&lt;/Directory&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9ef786662945-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cf9ef786662945-2">2</div><div class="crayon-num" data-line="crayon-55266611cf9ef786662945-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9ef786662945-1"><span class="crayon-r ">&lt;</span><span class="crayon-r ">Directory</span><span class="crayon-h"> </span><span class="crayon-e ">/var/www/html/roundcube</span><span class="crayon-r ">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cf9ef786662945-2"><span class="crayon-r">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AllowOverride</span><span class="crayon-h"> </span><span class="crayon-i ">All</span></div><div class="crayon-line" id="crayon-55266611cf9ef786662945-3"><span class="crayon-r ">&lt;</span><span class="crayon-r ">/Directory</span><span class="crayon-r ">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p></p>
<h4>4. Roundcube Test</h4>
<p>Go to <a href="http://127.0.0.1/roundcube" target="_blank">http://127.0.0.1/roundcube</a> and try to log in as “alice@example.com” with password “secret”.</p>
<p><span style="color: #ff0000;">Before any real users log in, HTTPS should be enabled on the webserver!</span></p>
<h4>5. Enable The Password Change Plugin</h4>
<p>Add it to the plugin array in /var/www/html/roundcube/config/config.inc.php:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cf9fa711779551" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">$config['plugins'] = array('password');</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cf9fa711779551-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cf9fa711779551-1"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'plugins'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">'password'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0013 seconds] -->
<p>Copy the necessary options from&nbsp;/var/www/html/roundcube/plugins/password/config.inc.php.dist to&nbsp;/var/www/html/roundcube/config/config.inc.php:</p><!-- Crayon Syntax Highlighter v2.6.9 -->

		<div id="crayon-55266611cfa04780132623" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; z-index: 4;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">// Password Plugin options
// -----------------------
$config['password_driver'] = 'ldap_simple';
$config['password_confirm_current'] = true;
$config['password_minimum_length'] = 6;
$config['password_require_nonalpha'] = false;
$config['password_log'] = false;
$config['password_login_exceptions'] = null;
$config['password_hosts'] = null;
$config['password_force_save'] = false;


// LDAP and LDAP_SIMPLE Driver options
// -----------------------------------
$config['password_ldap_host'] = '127.0.0.1';
$config['password_ldap_port'] = '389';
$config['password_ldap_starttls'] = false;
$config['password_ldap_version'] = '3';
$config['password_ldap_basedn'] = 'dc=example,dc=com';
$config['password_ldap_method'] = 'user';
$config['password_ldap_searchDN'] = 'uid=roundcube,ou=services,dc=example,dc=com';
$config['password_ldap_searchPW'] = 'secret';
$config['password_ldap_search_base'] = 'ou=people,dc=example,dc=com';
$config['password_ldap_search_filter'] = '(uniqueIdentifier=%name)';
$config['password_ldap_encodage'] = 'crypt';
$config['password_ldap_pwattr'] = 'userPassword';
$config['password_ldap_force_replace'] = true;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-55266611cfa04780132623-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-2">2</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-4">4</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-6">6</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-8">8</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-10">10</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-12">12</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-14">14</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-16">16</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-18">18</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-20">20</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-22">22</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-24">24</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-55266611cfa04780132623-26">26</div><div class="crayon-num" data-line="crayon-55266611cfa04780132623-27">27</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-55266611cfa04780132623-1"><span class="crayon-c">// Password Plugin options</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-2"><span class="crayon-c">// -----------------------</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-3"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_driver'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'ldap_simple'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-4"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_confirm_current'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-5"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_minimum_length'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-6"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_require_nonalpha'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-7"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_log'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-8"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_login_exceptions'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-9"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_hosts'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-10"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_force_save'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-12">&nbsp;</div><div class="crayon-line" id="crayon-55266611cfa04780132623-13"><span class="crayon-c">// LDAP and LDAP_SIMPLE Driver options</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-14"><span class="crayon-c">// -----------------------------------</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-15"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_host'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'127.0.0.1'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-16"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_port'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'389'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-17"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_starttls'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-18"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_version'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'3'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-19"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_basedn'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'dc=example,dc=com'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-20"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_method'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'user'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-21"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_searchDN'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'uid=roundcube,ou=services,dc=example,dc=com'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-22"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_searchPW'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'secret'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-23"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_search_base'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'ou=people,dc=example,dc=com'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-24"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_search_filter'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'(uniqueIdentifier=%name)'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-25"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_encodage'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'crypt'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-55266611cfa04780132623-26"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_pwattr'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'userPassword'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-55266611cfa04780132623-27"><span class="crayon-sy">$</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'password_ldap_force_replace'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0122 seconds] -->
<p>Users should now be able to change their LDAP password in the Roundcube Settings.</p>
<p>&nbsp;</p>
<h2>Closing Words</h2>
<p>This was an attempt to create an as short as possible mailserver howto. It only addresses the most essential parts. Depending on your environment things might have to be different, though.</p>
<p><span style="color: #ff0000;">Please consider: in this howto LDAP and Apache communication is completely unencrypted. On a real server you should do something about that! Also, don’t forget to keep your private keys and password files safe by chown- and chmod-ing them properly!</span></p>
<p>Files and folders containing passwords:</p>
<ul>
<li>/etc/postfix/ldap_virtual_aliases.cf</li>
<li>/etc/postfix/ldap_virtual_recipients.cf</li>
<li>/etc/dovecot/dovecot-ldap.conf.ext</li>
<li>/etc/saslauthd.conf</li>
<li>/var/www/html/roundcube/config/config.inc.php</li>
</ul>
<p>Folders containing private keys:</p>
<ul>
<li>/etc/postfix/certs</li>
<li>/etc/dovecot/private</li>
<li>/etc/ssl/private (possibly for your Apache key)</li>
</ul>
					</div><!-- END entry -->
	</div><!-- END post -->
	<div class="post_info_b">
		<span class="p_tag"></span>
		<span class="p_navi"><a href="http://acidx.net/wordpress/2014/05/changing-the-background-of-all-desktops-on-mac-os/" rel="prev">« Previous</a> | <a href="http://acidx.net/wordpress/2014/07/deleting-an-efi-system-partition-with-windows-7/" rel="next">Next »</a></span>
	</div>

	<!-- You can start editing here. -->
				<h2 id="comments"><span>34 Comments.</span><span class="add_comment">[ <a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#respond" rel="nofollow" title="Leave a comment ?">Leave a comment</a> ]</span></h2>
			<ol class="commentlist" id="thecomments">
					<li class="comment even thread-even depth-1" id="li-comment-307">
	<div id="comment-307">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-307">October 27, 2014 at 5:25 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hello,</p>
<p>Thanks for this very detailed tutorial. I was looking for one up to date for Ubuntu for a while.<br>
However, I’m stuck at the IMAP log in step. I followed every step carefully, I think.<br>
Here the logs:</p>
<p>In ldap<br>
Oct 27 17:17:50 ldap slapd[4656]: conn=1011 op=1 SRCH base=”ou=people,dc=,dc=fr” scope=2 deref=0 filter=”(&amp;(objectClass=PostfixBookMailAccount)(uniqueIdentifier=clement))”<br>
Oct 27 17:17:50 ldap slapd[4656]: conn=1011 op=1 SRCH attr=uniqueIdentifier userPassword<br>
Oct 27 17:17:50 ldap slapd[4656]: &lt;= bdb_equality_candidates: (uniqueIdentifier) not indexed<br>
Oct 27 17:17:50 ldap slapd[4656]: conn=1011 op=1 SEARCH RESULT tag=101 err=0 nentries=1 text=</p>
<p>In dovecot<br>
Oct 27 17:16:15 mail dovecot: auth: Debug: client in: AUTH#0111#011PLAIN#011service=imap#011secured#011session=ZTaZ2WkGKQB/AAAB#011lip=127.0.0.1#011rip=127.0.0.1#011lport=143#011rport=48425#011resp=<br>
Oct 27 17:16:15 mail dovecot: auth: Debug: ldap(clement@.fr,127.0.0.1,): pass search: base=ou=people,dc=,dc=fr scope=subtree filter=(&amp;(objectClass=PostfixBookMailAccount)(uniqueIdentifier=clement)) fields=uniqueIdentifier,userPassword<br>
Oct 27 17:16:15 mail dovecot: auth: Debug: ldap(clement@.fr,127.0.0.1,): result: uniqueIdentifier=clement; uniqueIdentifier unused<br>
Oct 27 17:16:15 mail dovecot: auth: Debug: auth(clement@.fr,127.0.0.1,): username changed clement@.fr -&gt; clement<br>
Oct 27 17:16:15 mail dovecot: auth: Debug: ldap(clement,127.0.0.1,): result: uniqueIdentifier=clement; userPassword missing<br>
Oct 27 17:16:15 mail dovecot: auth: ldap(clement,127.0.0.1,): No password returned (and no nopassword)<br>
Oct 27 17:16:17 mail dovecot: auth: Debug: client passdb out: FAIL#0111#011user=clement</p>
<p>Is someone has a clue about what’s wrong?<br>
Thank you <img src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/icon_smile.gif" alt=":)" class="wp-smiley"></p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-308">
	<div id="comment-308">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-308">October 27, 2014 at 7:59 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hi, in your log it says “ou=people,dc=,dc=fr”. Did you remove the domain name on purpose or does it really look like that in the log?</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-309">
	<div id="comment-309">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-309">October 27, 2014 at 9:34 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>I removed the domain on purpose.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-310">
	<div id="comment-310">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-310">October 27, 2014 at 9:53 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Ok <img src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/icon_wink.gif" alt=";)" class="wp-smiley"> Can you post the content of your /etc/dovecot/dovecot-ldap.conf.ext file?</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-311">
	<div id="comment-311">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-311">October 27, 2014 at 10:09 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Sure. I removed all commented lines and change the domain and dnspass variable :</p>
<p>hosts = 192.168.1.12<br>
dn = uid=dovecot,ou=services,dc=mydomain,dc=fr<br>
dnpass = mypassword<br>
ldap_version = 3<br>
base = ou=people,dc=mydomain,dc=fr<br>
user_attrs = mailHomeDirectory=home,mailUidNumber=uid,mailGidNumber=gid,mailStorageDirectory=mail<br>
user_filter = (&amp;(objectClass=PostfixBookMailAccount)(uniqueIdentifier=%n))<br>
pass_attrs = uniqueIdentifier=user,userPassword=password<br>
pass_filter = (&amp;(objectClass=PostfixBookMailAccount)(uniqueIdentifier=%n))<br>
default_pass_scheme = CRYPT</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-312">
	<div id="comment-312">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-312">October 27, 2014 at 11:01 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Well, that config file looks fine, but for some reason the query doesn’t return the password. I checked my logs and it also says “uniqueIdentifier unused” so that doesn’t seem to be a problem.</p>
<p>In your LDAP, the “userPassword”-attribute for the account “uniqueIdentifier=clement,ou=people,dc=yourdomain,dc=fr” is existent and set?</p>
<p>What’s the result for this manual query?</p>
<p>ldapsearch -x -W -D uid=dovecot,ou=services,dc=yourdomain,dc=fr -b ou=people,dc=yourdomain,dc=fr -LLL ‘uniqueIdentifier=clement’</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-313">
	<div id="comment-313">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-313">October 27, 2014 at 11:10 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Yes, it’s set with a value {ssha}n…..</p>
<p># ldapsearch -x -W -D uid=dovecot,ou=services,dc=mydomain,dc=fr -b ou=people,dc=mydomain,dc=fr -LLL ‘uniqueIdentifier=clement’<br>
Enter LDAP Password:<br>
dn: uniqueIdentifier=clement,ou=people,dc=mydomain,dc=fr<br>
objectClass: organizationalPerson<br>
objectClass: person<br>
objectClass: top<br>
objectClass: PostfixBookMailAccount<br>
objectClass: extensibleObject<br>
cn: Clement<br>
givenName: Clement<br>
mail: clement@…<br>
mailEnabled: TRUE<br>
mailGidNumber: 5000<br>
mailHomeDirectory: /home/clement<br>
mailQuota: 0<br>
mailStorageDirectory: maildir:/home/clement/Maildir<br>
mailUidNumber: 5000<br>
uniqueIdentifier: clement<br>
sn: Clement<br>
mailAlias: postmaster@…</p>
<p><em>//edited by admin: real domain name changed to ‘mydomain’</em></p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-314">
	<div id="comment-314">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-314">October 27, 2014 at 11:20 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>The userPassword is missing in that result, which means that the problem is within your LDAP configuration / ACL (olcAccess)</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-315">
	<div id="comment-315">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-315">November 1, 2014 at 6:44 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Thank you! Actually, I had two problems. First I configured the ACL, then, I tried to use a remote disk connected with sshfs (not a good idea ^^).</p>
<p>So I followed the rest of the tutorial until the TLS part (included). But I can’t send emails although it works if I send an email to the same domain. I configured thunderbird with starttls on port 25.<br>
Nov  1 18:33:55 mail postfix/smtpd[811]: connect from myclient.tld[192.168.1.1]<br>
Nov  1 18:33:55 mail postfix/smtpd[811]: NOQUEUE: reject: RCPT from myclient.tld[192.168.1.1]: 554 5.7.1 : Relay access denied; from= to= proto=ESMTP helo=<br>
Nov  1 18:34:00 mail postfix/smtpd[811]: disconnect from myclient.tld[192.168.1.1]</p>
<p>Do I need to enable something in postfix?</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-316">
	<div id="comment-316">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-316">November 1, 2014 at 7:33 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Relay access denied means that you’re not allowed to send mail. Maybe SMTP authentication didn’t work? Are the two tests in the SASL chapter successful?</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-317">
	<div id="comment-317">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-317">November 1, 2014 at 7:49 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Yes, it was. But now, I can’t connect with telnet (but I think it’s the normal behavior):<br>
# telnet localhost 25<br>
Trying 127.0.0.1…<br>
Connected to localhost.<br>
Escape character is ‘^]’.<br>
220 mail.forumanalogue.fr ESMTP Postfix (Ubuntu)<br>
ehlo client<br>
250-mail.mydomain.fr<br>
250-PIPELINING<br>
250-SIZE 10240000<br>
250-ETRN<br>
250-STARTTLS<br>
250-ENHANCEDSTATUSCODES<br>
250-8BITMIME<br>
250 DSN</p>
<p>Now with tls:<br>
% openssl s_client -starttls smtp -connect mail.mydomain.fr:25<br>
[…]<br>
—<br>
250 DSN<br>
ehlo client<br>
250-mail.mydomain.fr<br>
250-PIPELINING<br>
250-SIZE 10240000<br>
250-ETRN<br>
250-AUTH PLAIN LOGIN<br>
250-AUTH=PLAIN LOGIN<br>
250-ENHANCEDSTATUSCODES<br>
250-8BITMIME<br>
250 DSN<br>
auth login<br>
334 VXNlcm5hbWU6<br>
Y2xlbWVudEBmb3J1bWFuYWxvZ3VlLmZy<br>
334 UGFzc3dvcmQ6<br>
Q2xlbWVudDAx<br>
DONE<br>
%</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-318">
	<div id="comment-318">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-318">November 1, 2014 at 8:11 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>I think I found what’s wrong in my configuration. It’s the parameter reject_unauth_destination in smtpd_recipient_restrictions. If I understood, it forbids to send email to another domain.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-319">
	<div id="comment-319">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-319">November 1, 2014 at 9:19 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>‘reject_unauth_destination’ prevents the mailserver from being an open relay, so I think it is better to keep that parameter. Clients that do not authenticate will only be able to send mail to your domain. ‘permit_sasl_authenticated’ ensures that authenticated clients will be able to send mail to any domain.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-320">
	<div id="comment-320">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/098b7920e8a5676042b31298bb9053af" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Clément</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-320">November 1, 2014 at 9:25 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>I probably miss something because since there is ‘reject_unauth_destination’, I can’t send email to other domains.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-321">
	<div id="comment-321">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-321">November 2, 2014 at 12:29 am</a> </span>
		</div>
				<div class="comment-text">
			<p>As for the last log you posted: It is correct, that the server doesn’t offer authentication when you connect with Telnet. Authentication is only offered when the connection is established using TLS, so that part seems to be fine.</p>
<p>It still looks like a SASL problem to me. If you do an “AUTH LOGIN” and enter your base64 encoded credentials, does the server repsond with “DONE”? I think it should respond with “Authentication successful” – unless it has been changed in newer versions..</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-323">
	<div id="comment-323">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/4414a66f998178b66fb43566d96591f7" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Andy</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-323">November 13, 2014 at 6:03 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Thanks for a great tutorial.</p>
<p>Could you tell me what modifications I would need to make to this setup if I wanted to connect from say a Thunderbird (Windows) or K9 (Android) client?</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-324">
	<div id="comment-324">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-324">November 13, 2014 at 7:45 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>There are no modifications necessary. It should be possible to connect with any email client. SMTP port is 25, IMAP port is 143 and POP3 port is 110. Authentication method is PLAIN and TLS needs to be checked.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-326">
	<div id="comment-326">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/268b59120fa7750a7f91d2e7cd8c5bb5" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">enrique</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-326">November 19, 2014 at 8:18 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>it’s possible use more than one virtual user mapping, for example ldap and mysql at same time????</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-327">
	<div id="comment-327">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-327">November 20, 2014 at 6:02 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>I don’t know, sorry.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-328">
	<div id="comment-328">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/cba5482b81fe50a928ea6c32a1cae8ae" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Tony Sinatra</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-328">November 27, 2014 at 5:37 am</a> </span>
		</div>
				<div class="comment-text">
			<p>Excellent howto – very grateful for your effort – saved a lot of time here. HINTS: For anyone attemting RHEL/CentOS setup, may require remove ‘MECH=pam’ and replace with MECH=ldap in /etc/sysconfig/saslauthd – Also note CentOS path to socketdir is /var/run/saslauthd and may require edit/modify the smtpd_sasl_path   ‘smtpd_sasl_path = private/auth’ in main.cf</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-329">
	<div id="comment-329">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/22dacc0c0e6f849d72b9c816a86f315e" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn"><a href="http://london.edu/" rel="external nofollow" class="url">Jon</a></cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-329">November 28, 2014 at 8:10 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hi, I am getting the exact same no password error with Clement. However when I do:</p>
<p>ldapsearch -x -W -D uid=dovecot,ou=services,dc=mydomain,dc=com -b ou=people,dc=mydomain,dc=com -LLL ‘uniqueIdentifier=jon.saral’</p>
<p>It says, Bad search filter (-7). My output from ldapsearch -x -W -D cn=admin,dc=mydomain,dc=com -b dc=mydomain,dc=com -LLL</p>
<p>is:</p>
<p>dn: dc=mydomain,dc=com<br>
objectClass: top<br>
objectClass: dcObject<br>
objectClass: organization<br>
o: mydomain<br>
dc: mydomain</p>
<p>dn: cn=admin,dc=mydomain,dc=com<br>
objectClass: simpleSecurityObject<br>
objectClass: organizationalRole<br>
cn: admin<br>
description: LDAP administrator<br>
userPassword:: passwordhashed</p>
<p>dn: ou=people,dc=mydomain,dc=com<br>
objectClass: organizationalUnit<br>
objectClass: top<br>
ou: people</p>
<p>dn: ou=services,dc=procekts,dc=com<br>
objectClass: organizationalUnit<br>
objectClass: top<br>
ou: services</p>
<p>dn: uid=postfix,ou=services,dc=procekts,dc=com<br>
objectClass: account<br>
objectClass: simpleSecurityObject<br>
objectClass: top<br>
uid: postfix<br>
userPassword:: hashedpassword</p>
<p>dn: uid=dovecot,ou=services,dc=mydomain,dc=com<br>
objectClass: account<br>
objectClass: simpleSecurityObject<br>
objectClass: top<br>
uid: dovecot<br>
userPassword:: hashedpswd</p>
<p>dn: uid=saslauthd,ou=services,dc=mydomain,dc=com<br>
objectClass: account<br>
objectClass: simpleSecurityObject<br>
objectClass: top<br>
uid: saslauthd<br>
userPassword:: hashed password</p>
<p>dn: uid=roundcube,ou=services,dc=mydomain,dc=com<br>
objectClass: account<br>
objectClass: simpleSecurityObject<br>
objectClass: top<br>
uid: roundcube<br>
userPassword:: hashed password</p>
<p>dn: uniqueIdentifier=jon.saral,ou=people,dc=mydomain,dc=com<br>
objectClass: organizationalPerson<br>
objectClass: person<br>
objectClass: top<br>
objectClass: PostfixBookMailAccount<br>
objectClass: extensibleObject<br>
cn: Jon Saral<br>
givenName: Jon<br>
mail: <a href="mailto:jon.saral@procekts.com">jon.saral@procekts.com</a><br>
mailAlias: <a href="mailto:postmaster@procekts.com">postmaster@procekts.com</a><br>
mailEnabled: TRUE<br>
mailGidNumber: 5000<br>
mailHomeDirectory: /srv/vmail/jon.saral@procekts.com<br>
mailQuota: 10240<br>
mailStorageDirectory: maildir:/srv/vmail/jon.saral@procekts.com/Maildir<br>
mailUidNumber: 5000<br>
sn: Saral<br>
uniqueIdentifier: jon.saral<br>
userPassword:: hashed password</p>
<p>I would appreciate any help. Thanks!</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-330">
	<div id="comment-330">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-330">December 1, 2014 at 1:58 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>The bad search filter error is probably due to wrong quotation marks. This blog unfortunately converts these to typographical quotation marks, so if you copy and paste from here, you have to remove and re-type the quotation marks.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-333">
	<div id="comment-333">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/7d080396df070059ffb71106bcd77cec" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Gunnar</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-333">December 6, 2014 at 10:36 am</a> </span>
		</div>
				<div class="comment-text">
			<p>THX for the great tutorial!</p>
<p>is it possible to create virtual adresses for users to receive emails in their default postbox? </p>
<p>Example: The default address gunnar@example also receives <a href="mailto:postmaster@example.de">postmaster@example.de</a> emails.</p>
<p>Thanks.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-334">
	<div id="comment-334">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-334">December 6, 2014 at 2:40 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Yes, that’s already implemented in this solution. See <em>main.cf</em> and <em>ldap_virtual_aliases.cf</em> in chapter <strong>[Postfix -&gt; 2. Configuration]</strong>. In chapter <strong>[LDAP]</strong> see the first screenshot (alice will also receive messages for postmaster and abuse).</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-338">
	<div id="comment-338">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/083347fcc87bc2a867ceb1e84388c68c" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">ßingen</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-338">December 25, 2014 at 6:09 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hi,</p>
<p>first of all thanks for a great tutorial!</p>
<p>I was having Clément’s problem too and I fixed it moving ‘reject_unauth_destination’ line under ‘permit_sasl_authenticated’ one.</p>
<p>Hope it helps.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-344">
	<div id="comment-344">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/0d4902837c5f645e3448174af4c53549" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Álex</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-344">December 29, 2014 at 2:29 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hello! Thanks you for this excellent tutorial. It’s really helping me out. But I’ve got stuck when loging in dovecot:</p>
<p>root@mail-server:~# telnet localhost 143<br>
Trying ::1…<br>
Connected to localhost.<br>
Escape character is ‘^]’.<br>
* OK [CAPABILITY IMAP4rev1 LITERAL+ SASL-IR LOGIN-REFERRALS ID ENABLE IDLE STARTTLS AUTH=PLAIN AUTH=LOGIN] Dovecot ready.<br>
1 login <a href="mailto:test2@alex.com">test2@alex.com</a> test2<br>
1 NO [UNAVAILABLE] Temporary authentication failure. [mail-server:2014-12-29 13:13:50]</p>
<p>Then I checked the log…</p>
<p>Error: ldap(test2@alex.com,::1,): ldap_search(base= filter=(&amp;(objectClass=PostfixBookMailAccount)(uniqueIdentifier=test2))) failed: No such object</p>
<p>…</p>
<p>auth-worker(11792): pam(test2@alex.com,::1): pam_authenticate() failed: Authentication failure (password mismatch?)</p>
<p>So I thought it may be because dovecot’s user at LDAP has no rights to view user passwords, but this is how my slapd.conf looks like (according to dovecot-ldap.conf.ext, access to passwords by dovecot must be enabled in order to check them):</p>
<p>…<br>
access to attrs=userPassword,shadowLastChange<br>
        by dn=”@ADMIN@” write<br>
        by dn=”uid=dovecot,ou=services,dc=mydomain,dc=com” read<br>
        by anonymous auth<br>
        by self write<br>
        by * none<br>
…</p>
<p>And still not works. </p>
<p>Mail users in my LDAP are in an OU named mail-users; all of them looks like the ones you create in this tutorial (I used postfix book schema).</p>
<p>I tried to create RootDN cn=config with your other howto but I can’t connect; it says invalid credentials.</p>
<p>I hope you can help me.</p>
<p>Thanks you.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="li-comment-347">
	<div id="comment-347">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-347">January 8, 2015 at 3:54 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hi &amp; sry for the delayed answer. Try to run the following command (with your corresponding data):</p>
<p>ldapsearch -x -W -D uid=dovecot,ou=services,dc=example,dc=com -b ou=people,dc=example,dc=com -LLL uniqueIdentifier=alice</p>
<p>It should return all information of the user including the encrypted password. If that doesn’t work, check if the contents of the following files are correct:</p>
<p>/etc/dovecot/conf.d/10-auth.conf<br>
/etc/dovecot/dovecot-ldap.conf.ext</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-352">
	<div id="comment-352">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/6068743840e3582a4fafa2dc10330d4c" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Wim Verheij</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-352">February 3, 2015 at 4:57 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Thanks for your excellent tutorial. This is one of the few that cover ldap integration.<br>
However, since I’m a complete noob on ldap, I am struggeling with creating ACLs for the postfix,dovecot,roundcube and saslauthd users. I understand that these user need at least read access to the ou=people subtree to find users, but I have no idea how to add this to the LDAP configuration.</p>
<p>Thanks again,</p>
<p>Wim</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-353">
	<div id="comment-353">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/6068743840e3582a4fafa2dc10330d4c" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Wim Verheij</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-353">February 4, 2015 at 9:51 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hello,</p>
<p>Please ignore my previous message regarding the ldap configuration. I solved it by using your ldap tutorial.<br>
I am installing on a Fedora 21 machine (just for testing purposes), and I had to make a slight modification to the ldap_virtual_recipients.cf and ldap_virtual_aliases.cf files. I had to add the line: ‘version = 3′. Otherwise I would get a protocol error.<br>
The SASL bit is still a bit unclear to me. I got it working by using dovecot for authentication by using the line ‘smtpd_sasl_type=dovecot’. It is quite clearly described in the postfix manual.</p>
<p>Anyway, thanks again for this guide. It has been fun configuring this. Before long I will do an install on a FreeBSD machine based on my current test environment.</p>
<p>Regards,</p>
<p>Wim</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-354">
	<div id="comment-354">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-354">February 5, 2015 at 8:56 am</a> </span>
		</div>
				<div class="comment-text">
			<p>Hello Wim, glad that you figured it out. And thanks for the feedback!</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-356">
	<div id="comment-356">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/d3b0ad0e1cc531ba19f2b933723ded2d" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Mauricio</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-356">February 8, 2015 at 12:11 am</a> </span>
		</div>
				<div class="comment-text">
			<p>Gracias, todo me salio perfecto.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-357">
	<div id="comment-357">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/855e3d904a9ae0a6cce04516fba08932" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">Tim</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-357">February 9, 2015 at 10:16 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hi, thanks for this great tutorial.<br>
I am facing a issue with ldap while running following command:<br>
# postmap -v -q <a href="mailto:testuser1@mydomain.com">testuser1@mydomain.com</a> ldap:/etc/postfix/ldap_virtual_recipients.cf<br>
postmap: name_mask: ipv4<br>
postmap: inet_addr_comal: configured 2 IPv4 addresses<br>
postmap: dict_ldap_open: Using LDAP source /etc/postfix/ldap_virtual_recipients.cf<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: server_host = ldap://ldap.mydomain.com:389<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: server_port = 389<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: version = 2<br>
postmap: dict_ldap_open: /etc/postfix/ldap_virtual_recipients.cf server_host URL is ldap://ldap.mydomain.com:389<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: scope = sub<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: search_base = ou=Users,dc=mydomain,dc=com<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: timeout = 10<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: query_filter = (&amp;(mail=%s)(mailEnabled=TRUE))<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: result_format =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: result_filter = %s<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: domain = mydomain.com<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: terminal_result_attribute =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: leaf_result_attribute =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: result_attribute = mail<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: special_result_attribute =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: bind = yes<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: bind_dn = uid=postfix,ou=Services,dc=mydomain,dc=com<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: bind_pw = postfix<br>
postmap: cfg_get_bool: /etc/postfix/ldap_virtual_recipients.cf: cache = off<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: cache_expiry = -1<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: cache_size = -1<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: recursion_limit = 1000<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: expansion_limit = 0<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: size_limit = 0<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: dereference = 0<br>
postmap: cfg_get_bool: /etc/postfix/ldap_virtual_recipients.cf: chase_referrals = off<br>
postmap: cfg_get_bool: /etc/postfix/ldap_virtual_recipients.cf: start_tls = off<br>
postmap: cfg_get_bool: /etc/postfix/ldap_virtual_recipients.cf: tls_require_cert = off<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: tls_ca_cert_file =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: tls_ca_cert_dir =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: tls_cert =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: tls_key =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: tls_random_file =<br>
postmap: cfg_get_str: /etc/postfix/ldap_virtual_recipients.cf: tls_cipher_suite =<br>
postmap: cfg_get_int: /etc/postfix/ldap_virtual_recipients.cf: debuglevel = 0<br>
postmap: dict_open: ldap:/etc/postfix/ldap_virtual_recipients.cf<br>
postmap: dict_ldap_lookup: In dict_ldap_lookup<br>
postmap: match_string: mydomain.com ~? mydomain.com<br>
postmap: dict_ldap_lookup: No existing connection for LDAP source /etc/postfix/ldap_virtual_recipients.cf, reopening<br>
postmap: dict_ldap_connect: Connecting to server ldap://ldap.mydomain.com:389<br>
postmap: dict_ldap_connect: Actual Protocol version used is 2.<br>
postmap: dict_ldap_connect: Binding to server ldap://ldap.mydomain.com:389 with dn uid=postfix,ou=Services,dc=mydomain,dc=com<br>
postmap: warning: dict_ldap_connect: Unable to bind to server ldap://ldap.mydomain.com:389 with dn uid=postfix,ou=Services,dc=mydomain,dc=com: 2 (Protocol error)<br>
postmap: fatal: table ldap:/etc/postfix/ldap_virtual_recipients.cf: query error: Success<br>
Could you please tell me if I need to configure anything in ldap.<br>
Thanks</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-363">
	<div id="comment-363">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/1795f0a0b0dbb16935d4abb8961f9992" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">André</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-363">March 17, 2015 at 10:36 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>Hello,</p>
<p>Thanks a lot for this awesome tutorial! It was very helpfull <img src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/icon_biggrin.gif" alt=":D" class="wp-smiley"></p>
<p>I was wondering if it is possible to make a Multi domain setup with this configuration.<br>
I’m guessing if i’d add another domain to LDAP (same content as your example) and add the new search criteria in the config files it should work.</p>
<p>Am I right, or am I missing something here?</p>
<p>Thanks in advance</p>
<p>Regards,</p>
<p>André</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-364">
	<div id="comment-364">
		<div class="comment-author vcard">
			<img alt="" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/189f17026d1191a693cdbd284b942b12" class="avatar avatar-40 photo" height="40" width="40">			<cite class="fn">admin</cite>
			<span class="comment-meta commentmetadata"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-364">March 18, 2015 at 2:38 pm</a> </span>
		</div>
				<div class="comment-text">
			<p>@Tim:</p>
<p>The problem might be that protocol version 2 is used instead of 3. Check <strong>/etc/dovecot/dovecot-ldap.conf.ext</strong> and make sure to add <strong>ldap_version = 3</strong>.</p>
<p>@Andre:</p>
<p>It might work like that, but I can’t tell since I haven’t tried it.</p>
		</div>
		<div class="reply">
					</div>
	</div>
</li><!-- #comment-## -->
			</ol>
												<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#respond" style="display:none;"><small>Cancel reply</small></a></small></h3>
									<form action="http://acidx.net/wordpress/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																										<p class="comment-form-author"><input id="author" name="author" type="text" value="" size="30"> <label for="author"><small>NAME</small></label></p>
<p class="comment-form-email"><input id="email" name="email" type="text" value="" size="30"> <label for="email">EMAIL</label></p>
<p class="comment-form-url"><input id="url" name="url" type="text" value="" size="30"> <label for="url">Website URL</label></p>
<p class="comment-form-captcha">
	<script type="text/javascript">
	jQuery(document).ready(function($) {
		$("#reload_captcha").click(function() {
		str="http://acidx.net/wordpress/wp-content/plugins/thethe-captcha/lib/w3captcha.php?w3_count=5&amp;w3_width=100&amp;w3_height=48&amp;w3_font_size_min=32&amp;w3_font_size_max=32&amp;w3_char_angle_min=10&amp;w3_char_angle_max=10&amp;w3_char_angle_shadow=5&amp;w3_char_align=40&amp;w3_start=5&amp;w3_interval=16&amp;w3_chars=0123456789&amp;w3_noise=10&amp;w3_backg=ffffff&amp;w3_shadow=000000&amp;rand="+ Math.round(Math.random (0) * 1000);
		str=str.replace(/&amp;/g,"&");
		document.images["thethe_captcha"].src=str;
		}) 
	}) 
	</script>
	<img src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/w3captcha.php" alt="Captcha" id="thethe_captcha">
	<img src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/reload.gif" id="reload_captcha" alt="Captcha Reload" title="Captcha Reload">
	<br>
	
	<label for="captcha_input">CAPTCHA Code</label>
	<input type="text" name="captcha_input" id="captcha_input">
	</p>												<p class="comment-form-comment"><div id="qt_comment_toolbar" class="quicktags-toolbar"><input type="button" id="qt_comment_strong" class="ed_button button button-small" value="b"><input type="button" id="qt_comment_em" class="ed_button button button-small" value="i"><input type="button" id="qt_comment_link" class="ed_button button button-small" value="link"><input type="button" id="qt_comment_block" class="ed_button button button-small" value="b-quote"><input type="button" id="qt_comment_del" class="ed_button button button-small" value="del"><input type="button" id="qt_comment_ins" class="ed_button button button-small" value="ins"><input type="button" id="qt_comment_img" class="ed_button button button-small" value="img"><input type="button" id="qt_comment_ul" class="ed_button button button-small" value="ul"><input type="button" id="qt_comment_ol" class="ed_button button button-small" value="ol"><input type="button" id="qt_comment_li" class="ed_button button button-small" value="li"><input type="button" id="qt_comment_code" class="ed_button button button-small" value="code"><input type="button" id="qt_comment_more" class="ed_button button button-small" value="more"><input type="button" id="qt_comment_close" class="ed_button button button-small" title="Close all open tags" value="close tags"><a class="crayon-tag-editor-button-wrapper cboxElement" href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#crayon-te-content"><input type="button" id="qt_comment_crayon_quicktag" class="ed_button button button-small" value="crayon"></a></div><textarea id="comment" name="comment" class="comment-textarea"></textarea></p>												<p class="form-submit">
							<input name="submit" type="submit" id="submit" class="submit" value="SUBMIT">
							<input type="hidden" name="comment_post_ID" value="1572" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
						</p>
											</form>
							</div><!-- #respond -->
				</div><!--content-->

<div id="sidebar">

		<!--
	<div class="widget">
		<h3>Advertisement</h3>
		<div class="s_ad">
			<div class="s_ad125">AD1 code here</div>
			<div class="s_ad125">AD2 code here</div>
			<div class="s_ad125">AD3 code here</div>
			<div class="s_ad125">AD4 code here</div>
			<div class="clear"></div>
		</div>
	</div>
	-->

<div id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widgettitle">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">admin</span> on <a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-364">Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube</a></li><li class="recentcomments"><span class="comment-author-link">André</span> on <a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-363">Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube</a></li><li class="recentcomments"><span class="comment-author-link">Tim</span> on <a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-357">Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube</a></li><li class="recentcomments"><span class="comment-author-link">Mauricio</span> on <a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-356">Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube</a></li><li class="recentcomments"><span class="comment-author-link">admin</span> on <a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#comment-354">Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube</a></li></ul></div>		<div id="most-viewed-posts-2" class="widget widget_most_viewed_entries">		<h3 class="widgettitle">Most Viewed Posts</h3>		<ul>
						<li><a href="http://acidx.net/wordpress/2012/09/retrieving-system-information-via-command-line-on-windows/" title="Retrieving System Information via Command Line on Windows">Retrieving System Information via Command Line on Windows</a></li>
						<li><a href="http://acidx.net/wordpress/2012/09/creating-a-certification-authority-and-a-server-certificate-on-ubuntu/" title="Creating a Certification Authority and a Server Certificate on Ubuntu">Creating a Certification Authority and a Server Certificate on Ubuntu</a></li>
						<li><a href="http://acidx.net/wordpress/2011/12/how-to-set-up-a-vpn-on-dd-wrt/" title="How To Set Up a VPN on DD-WRT">How To Set Up a VPN on DD-WRT</a></li>
						<li><a href="http://acidx.net/wordpress/2013/09/data-recovery-with-foremost-scalpel/" title="Data Recovery With Foremost &amp; Scalpel">Data Recovery With Foremost &amp; Scalpel</a></li>
						<li><a href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog.html" title="Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube">Installing a Mailserver with Postfix, Dovecot, SASL, LDAP &amp; Roundcube</a></li>
				</ul>
		</div>		<div id="categories-2" class="widget widget_categories"><h3 class="widgettitle">Categories</h3>		<ul>
	<li class="cat-item cat-item-17"><a href="http://acidx.net/wordpress/category/review/flashlight/">Flashlight</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://acidx.net/wordpress/category/howto/hardware/">Hardware</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://acidx.net/wordpress/category/howto/">HowTo</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://acidx.net/wordpress/category/information/">Information</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://acidx.net/wordpress/category/howto/linux/">Linux</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://acidx.net/wordpress/category/howto/mac/">Mac</a>
</li>
	<li class="cat-item cat-item-18"><a href="http://acidx.net/wordpress/category/raspberry/">Raspberry</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://acidx.net/wordpress/category/review/">Review</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://acidx.net/wordpress/category/howto/windows/">Windows</a>
</li>
		</ul>
</div><div id="meta-2" class="widget widget_meta"><h3 class="widgettitle">Meta</h3>			<ul>
						<li><a href="http://acidx.net/wordpress/wp-login.php">Log in</a></li>
			<li><a href="http://acidx.net/wordpress/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://acidx.net/wordpress/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
</div></div></div><!--wrapper-->
<div class="clear"></div>
<div id="footer">
	©&nbsp;Copyright&nbsp;2015&nbsp;Acidx's Blog	⋅&nbsp;Theme&nbsp;by&nbsp;zwwooooo&nbsp;&amp;&nbsp;<a href="http://schiy.com/">schiy</a>
	⋅&nbsp;Powered&nbsp;by&nbsp;<a href="http://wordpress.org/">WordPress</a> 
</div><!--footer-->
<link rel="stylesheet" id="buttons-css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/buttons.min.css" type="text/css" media="all">
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/jquery.tools.min.js"></script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/simple-contact-form-revisited-plugin.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var wordCountL10n = {"type":"w"};
/* ]]> */
</script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/word-count.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var userSettings = {"url":"\/wordpress\/","uid":"0","time":"1428579857","secure":""};
/* ]]> */
</script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/utils.min.js"></script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/editor.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var wpLinkL10n = {"title":"Insert\/edit link","update":"Update","save":"Add Link","noTitle":"(no title)","noMatchesFound":"No results found."};
/* ]]> */
</script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/wplink.min.js"></script>
<link rel="stylesheet" type="text/css" href="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/tinymce_dashicons.css">
		<script type="text/javascript">
		tinyMCEPreInit = {
			baseURL: "http://acidx.net/wordpress/wp-includes/js/tinymce",
			suffix: ".min",
						mceInit: {'comment':{theme:"modern",skin:"lightgray",language:"en",formats:{
						alignleft: [
							{selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li', styles: {textAlign:'left'}},
							{selector: 'img,table,dl.wp-caption', classes: 'alignleft'}
						],
						aligncenter: [
							{selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li', styles: {textAlign:'center'}},
							{selector: 'img,table,dl.wp-caption', classes: 'aligncenter'}
						],
						alignright: [
							{selector: 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li', styles: {textAlign:'right'}},
							{selector: 'img,table,dl.wp-caption', classes: 'alignright'}
						],
						strikethrough: {inline: 'del'}
					},block_formats:"Paragraph=p;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",relative_urls:false,remove_script_host:false,convert_urls:false,browser_spellcheck:true,fix_list_elements:true,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:false,cache_suffix:"wp-mce-4107-20150118",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:false,wpeditimage_html5_captions:false,plugins:"charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",external_plugins:{"crayon_tinymce":"http:\/\/acidx.net\/wordpress\/wp-content\/plugins\/crayon-syntax-highlighter\/util\/tag-editor\/crayon_tinymce.js","table":"http:\/\/acidx.net\/wordpress\/wp-content\/plugins\/wp-edit\/plugins\/table\/plugin.min.js"},content_css:"http://acidx.net/wordpress/wp-includes/css/dashicons.min.css?ver=4.1.1,http://acidx.net/wordpress/wp-includes/js/tinymce/skins/wordpress/wp-content.css?ver=4.1.1",selector:"#comment",resize:"vertical",menubar:false,wpautop:true,indent:false,toolbar1:"fontselect,fontsizeselect,bold,italic,strikethrough,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,unlink,wp_more,hr,table,spellchecker,fullscreen,wp_adv,separator,crayon_tinymce",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"comment post-type-post post-status-publish post-format-standard locale-en-us",tools:"inserttable",fontsize_formats:"6pt 8pt 10pt 12pt 14pt 16pt 18pt 20pt 22pt 24pt 26pt 28pt 30pt 32pt 34pt 36pt 48pt 72pt",style_formats:[],style_formats_merge:true,extended_valid_elements:",pre[*],code[*],iframe[*]"}},
			qtInit: {'comment':{id:"comment",buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,more,close"}},
			ref: {plugins:"charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",theme:"modern",language:"en"},
			load_ext: function(url,lang){var sl=tinymce.ScriptLoader;sl.markDone(url+'/langs/'+lang+'.js');sl.markDone(url+'/langs/'+lang+'_dlg.js');}
		};
		</script>
		<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/tinymce.min.js"></script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/plugin.min.js"></script>
<script type="text/javascript">
tinymce.addI18n( 'en', {"Ok":"OK","Bullet list":"Bulleted list","Spellcheck":"Check Spelling","Row properties":"Table row properties","Cell properties":"Table cell properties","Paste row before":"Paste table row before","Paste row after":"Paste table row after","Cut row":"Cut table row","Copy row":"Copy table row","Merge cells":"Merge table cells","Split cell":"Split table cell","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.\n\nIf you\u2019re looking to paste rich content from Microsoft Word, try turning this option off. The editor will clean up text pasted from Word automatically.","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"Rich Text Area. Press Alt-Shift-H for help","You have unsaved changes are you sure you want to navigate away?":"The changes you made will be lost if you navigate away from this page.","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X\/C\/V keyboard shortcuts instead.":"Your browser does not support direct access to the clipboard. Please use keyboard shortcuts or your browser\u2019s edit menu instead.","Edit ":"Edit"});
tinymce.ScriptLoader.markDone( 'http://acidx.net/wordpress/wp-includes/js/tinymce/langs/en.js' );
</script>
<script type="text/javascript" src="./Installing a Mailserver with Postfix, Dovecot, SASL, LDAP & Roundcube   Acidx's Blog_files/wp-langs-en.js"></script>
		<script type="text/javascript">
		tinyMCEPreInit.load_ext("http://acidx.net/wordpress/wp-content/plugins/crayon-syntax-highlighter/util/tag-editor", "en");
tinymce.PluginManager.load("crayon_tinymce", "http://acidx.net/wordpress/wp-content/plugins/crayon-syntax-highlighter/util/tag-editor/crayon_tinymce.js");
tinyMCEPreInit.load_ext("http://acidx.net/wordpress/wp-content/plugins/wp-edit/plugins/table", "en");
tinymce.PluginManager.load("table", "http://acidx.net/wordpress/wp-content/plugins/wp-edit/plugins/table/plugin.min.js");

var ajaxurl = "/wordpress/wp-admin/admin-ajax.php";
		( function() {
			var init, edId, qtId, firstInit, wrapper;

			if ( typeof tinymce !== 'undefined' ) {
				for ( edId in tinyMCEPreInit.mceInit ) {
					if ( firstInit ) {
						init = tinyMCEPreInit.mceInit[edId] = tinymce.extend( {}, firstInit, tinyMCEPreInit.mceInit[edId] );
					} else {
						init = firstInit = tinyMCEPreInit.mceInit[edId];
					}

					wrapper = tinymce.DOM.select( '#wp-' + edId + '-wrap' )[0];

					if ( ( tinymce.DOM.hasClass( wrapper, 'tmce-active' ) || ! tinyMCEPreInit.qtInit.hasOwnProperty( edId ) ) &&
						! init.wp_skip_init ) {

						try {
							tinymce.init( init );

							if ( ! window.wpActiveEditor ) {
								window.wpActiveEditor = edId;
							}
						} catch(e){}
					}
				}
			}

			if ( typeof quicktags !== 'undefined' ) {
				for ( qtId in tinyMCEPreInit.qtInit ) {
					try {
						quicktags( tinyMCEPreInit.qtInit[qtId] );

						if ( ! window.wpActiveEditor ) {
							window.wpActiveEditor = qtId;
						}
					} catch(e){};
				}
			}

			if ( typeof jQuery !== 'undefined' ) {
				jQuery('.wp-editor-wrap').on( 'click.wp-editor', function() {
					if ( this.id ) {
						window.wpActiveEditor = this.id.slice( 3, -5 );
					}
				});
			} else {
				for ( qtId in tinyMCEPreInit.qtInit ) {
					document.getElementById( 'wp-' + qtId + '-wrap' ).onclick = function() {
						window.wpActiveEditor = this.id.slice( 3, -5 );
					}
				}
			}
		}());
		</script>
				<div id="wp-link-backdrop" style="display: none"></div>
		<div id="wp-link-wrap" class="wp-core-ui" style="display: none">
		<form id="wp-link" tabindex="-1">
		<input type="hidden" id="_ajax_linking_nonce" name="_ajax_linking_nonce" value="73d9c1b2db">		<div id="link-modal-title">
			Insert/edit link			<button type="button" id="wp-link-close"><span class="screen-reader-text">Close</span></button>
	 	</div>
		<div id="link-selector">
			<div id="link-options">
				<p class="howto">Enter the destination URL</p>
				<div>
					<label><span>URL</span><input id="url-field" type="text" name="href"></label>
				</div>
				<div>
					<label><span>Title</span><input id="link-title-field" type="text" name="linktitle"></label>
				</div>
				<div class="link-target">
					<label><span>&nbsp;</span><input type="checkbox" id="link-target-checkbox"> Open link in a new window/tab</label>
				</div>
			</div>
			<p class="howto"><a href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#" id="wp-link-search-toggle">Or link to existing content</a></p>
			<div id="search-panel">
				<div class="link-search-wrapper">
					<label>
						<span class="search-label">Search</span>
						<input type="search" id="search-field" class="link-search-field" autocomplete="off">
						<span class="spinner"></span>
					</label>
				</div>
				<div id="search-results" class="query-results" tabindex="0">
					<ul></ul>
					<div class="river-waiting">
						<span class="spinner"></span>
					</div>
				</div>
				<div id="most-recent-results" class="query-results" tabindex="0">
					<div class="query-notice" id="query-notice-message">
						<em class="query-notice-default">No search term specified. Showing recent items.</em>
						<em class="query-notice-hint screen-reader-text">Search or use up and down arrow keys to select an item.</em>
					</div>
					<ul></ul>
					<div class="river-waiting">
						<span class="spinner"></span>
					</div>
				</div>
			</div>
		</div>
		<div class="submitbox">
			<div id="wp-link-cancel">
				<a class="submitdelete deletion" href="http://acidx.net/wordpress/2014/06/installing-a-mailserver-with-postfix-dovecot-sasl-ldap-roundcube/#">Cancel</a>
			</div>
			<div id="wp-link-update">
				<input type="submit" value="Add Link" class="button button-primary" id="wp-link-submit" name="wp-link-submit">
			</div>
		</div>
		</form>
		</div>
		
<div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none; max-width: none;"></div></div></body></html>